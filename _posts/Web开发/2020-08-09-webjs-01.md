---
layout: post
title: JS进阶(一)-
category: Web开发
tags: Web开发
description: Web开发
--- 

## JS中的面向对象

### 类和对象
1. 对象
    1. 在JavaScript中，对象是一组无序的相关属性和方法的集合，所有的事物都是对象，例如：字符串、数值、数组、函数等
    2. 对象是由属性和方法组成的
2. 类
    1. 在ES6中，新增加了类的概念，可以使用class关键字声明一个类，之后用这个类实例化对象
    
### ES6中的类和对象

#### 类、对象、属性、方法
1. 创建类
    
    ```
    class name {
        // class body
    }
    
    ```
2. 通过类创建对象
    
    ```
    // 类必须用new实例化对象
    var obj = new name();
    ```
3. 类constructor构造函数
    1. `constructor()` 方法是类的构造函数(默认方法)，**用于传递参数**,返回实例对象，通过 new 命令生成对象实例时 ，自动调用该方法。如果没有显示定义, 类内部会自动给我们创建一个constructor()
    2. 语法:
        
        ```
        class Person { 
            constructor(name,age) {// constructor 构造方法或者构造函数
                this.name = name;
                this.age = age; 
            }
        }
        ```
    3. 创建实例:
        
        ```
        var ldh = new Person('二哈', 18); 
        console.log(ldh.name)
        ```
4. 类添加方法
    1. 语法:
        
        ```
        class Person { 
            constructor(name,age) {// constructor 构造器或者构造函数
                this.name = name;
                this.age = age; 
            }
            //
            say() {
                console.log(this.name + '你好');
            } 
        }
        ```
    2. 创建实例:
        
        ```
        var ldh = new Person('刘德华', 18); 
        ldh.say();
        ```
    3. **注意: 方法之间不能加逗号分隔，同时方法不需要添加 function 关键字。**
    
#### 类的继承
1. 继承
    1. 语法:
        
        ```
        class Father{ // 父类
        
        }
        class Son extends Father { // 子类继承父类 
        }
        ```
    2. 举例：
        
        ```
        class Father {
            constructor(surname) {
                this.surname= surname; 
            }
            say() {
                console.log('你的姓是' + this.surname);
            } 
        }
        class Son extends Father{ // 这样子类就继承了父类的属性和方法
        }
        var damao= new Son('刘');
        damao.say();
        ```
2. super 关键字
    1. super 关键字用于访问和调用对象父类上的函数。可以调用父类的构造函数，也可以调用父类的普通函数
    2. 调用父类的构造函数:
        
        ```
        class Person { // 父类 
            constructor(surname){ 
            this.surname = surname;
            } 
        } 
        class Student extends Person { // 子类继承父类
            constructor(surname,firstname){ 
                super(surname); // 调用父类的constructor(surname)    
                this.firstname = firstname; // 定义子类独有的属性
            } 
        }
        ```
    3. **注意: **子类在构造函数中使用super, 必须放到 this 前面 (必须先调用父类的构造方法,在使用子类构造方法)
    4. 案例：
        
        ```
        class Father { 
            constructor(surname) { 
                this.surname = surname; 
            } 
            saySurname() { 
                console.log('我的姓是' + this.surname);
            } 
        } 
        class Son extends Father { // 这样子类就继承了父类的属性和方法 
            constructor(surname, fristname) { 
                super(surname); // 调用父类的constructor(surname) 
                this.fristname = fristname; 
            }
            sayFristname() { 
                console.log("我的名字是：" + this.fristname);
            }
        }
        var damao = new Son('刘', "德华"); 
        damao.saySurname(); 
        damao.sayFristname();
        ```
    5. 调用父类的普通函数。
        
        ```
        class Father {
            say() { 
                return '我是爸爸';
            }
        }
        class Son extends Father { // 这样子类就继承了父类的属性和方法
            say() { 
                // super.say(); super 调用父类的方法 
                return super.say() + '的儿子';     
            } 
        } 
        var damao = new Son(); 
        console.log(damao.say());
        ```
        
#### ES6 中的类和对象的三个注意点:
1. 在 ES6 中类没有变量提升，所以必须先定义类，才能通过类实例化对象.
2. 类里面的共有属性和方法一定要加this使用.
3. 类里面的this指向问题.
    1. **constructor 里面的this**:指向实例对象；
    2. **方法里面的this**:指向这个方法的调用者
4. 代码举例：
    
    ```
    <button>点击</button>
    <script>
        var that;
        class Star {
            constructor (name, age) {
                // 记录this到that，便于成员函数内部获取,必须放在前面
                that = this;
    
                // constructor这里面的this指向的是向实例对象
                this.name = name;
                this.age = age;
                // 要用this
                this.sing();
                
                this.btn = document.querySelector("button");
                this.btn.onclick = this.sing;
            }
            // 方法里面的this，指向该方法的调用者
            sing(){
                // 要用this
                // 当点击按钮时，这个方法的直接调用者是button，而不是当前实例对象
                console.log(this.name + "唱歌");
                // 点击按钮时，如何拿到当前实例的this？ 搞一个全局变量记录
                console.log(that.name + "唱歌");
    
            }
        }
        let ldh = new Star("刘德华");
    </script>
    ```
    
            


