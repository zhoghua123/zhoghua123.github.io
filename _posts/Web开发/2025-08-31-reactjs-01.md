---
layout: post
title: ReactJSè¯­æ³•-React ç»„ä»¶
category: Webå¼€å‘
tags: Webå¼€å‘
description: Webå¼€å‘
--- 


## å‡½æ•°ç»„ä»¶
1. åœ¨Reactä¸­ï¼Œæ„é€ å‡½æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„ç»„ä»¶
2. å¦‚æœæƒ³è¦æŠŠç»„ä»¶æ”¾åˆ°é¡µé¢ä¸­ï¼Œå¯ä»¥æŠŠ æ„é€ å‡½æ•°çš„åç§°ï¼Œå½“ä½œ ç»„ä»¶çš„åç§°ï¼Œä»¥ HTMLæ ‡ç­¾å½¢å¼å¼•å…¥é¡µé¢ä¸­å³å¯
3. **æ³¨æ„ï¼š** Reactåœ¨è§£ææ‰€æœ‰çš„æ ‡ç­¾çš„æ—¶å€™ï¼Œæ˜¯ä»¥æ ‡ç­¾çš„é¦–å­—æ¯æ¥åŒºåˆ†çš„ï¼Œå¦‚æœæ ‡ç­¾çš„é¦–å­—æ¯æ˜¯å°å†™ï¼Œé‚£ä¹ˆå°±æŒ‰ç…§ æ™®é€šçš„ HTML æ ‡ç­¾æ¥è§£æï¼Œå¦‚æœ é¦–å­—æ¯æ˜¯å¤§å†™ï¼Œåˆ™æŒ‰ç…§ ç»„ä»¶çš„å½¢å¼å»è§£ææ¸²æŸ“ï¼Œå³**ç»„ä»¶çš„é¦–å­—æ¯å¿…é¡»æ˜¯å¤§å†™**
4. æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°
5. thiså…³é”®å­—ä¸èƒ½æŒ‡å‘ç»„ä»¶å®ä¾‹
6. æ²¡æœ‰å†…éƒ¨çŠ¶æ€ï¼ˆstateï¼‰
    
```
//1. å®šä¹‰ç»„ä»¶Hello,é¦–å­—æ¯å¿…é¡»å¤§å†™
function Hello() {
    return <div>
        <h1>è¿™æ˜¯åœ¨Helloç»„ä»¶ä¸­å®šä¹‰çš„å…ƒç´ </h1>
        </div>
}
    
//2. æ¸²æŸ“ç»„ä»¶
ReactDOM.render(<div>
    <Hello></Hello>
</div>ï¼Œdocument.getElementById('app'))
```

### ç»„ä»¶ä¼ å€¼
    
 ```
//1. å®šä¹‰ç»„ä»¶Hello,é¦–å­—æ¯å¿…é¡»å¤§å†™
function Hello(props) {
    // åœ¨ç»„ä»¶ä¸­ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨å¤–éƒ¨ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œå¿…é¡»ï¼Œæ˜¾ç¤ºçš„åœ¨ æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­ï¼Œå®šä¹‰ props å±æ€§æ¥æ¥æ”¶ï¼›
    // é€šè¿‡ props å¾—åˆ°çš„ä»»ä½•æ•°æ®éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä»æ–°èµ‹å€¼
    // props.name = '000'
    return <div>
        <h1>è¿™æ˜¯åœ¨Helloç»„ä»¶ä¸­å®šä¹‰çš„å…ƒç´ ---{props.name}</h1>
    </div>
}
    
// var name = 'zs'
// var age = 20
var person = {
  name: 'ls',
  age: 22,
  gender: 'ç”·',
  address: 'åŒ—äº¬'
}
//2. æ¸²æŸ“ç»„ä»¶
ReactDOM.render(<div>
    {//<Hello name={person.name} age={person.age} gender={person.gender} address={person.address}></Hello>}
    {//ç®€è¦å†™æ³•}
    <Hello {...person}></Hello>
</div>ï¼Œdocument.getElementById('app'))
// æ³¨æ„ï¼šè¿™é‡Œ ...Obj  è¯­æ³•ï¼Œæ˜¯ ES6ä¸­çš„å±æ€§æ‰©æ•£ï¼Œ è¡¨ç¤ºï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå±•å¼€äº†ï¼Œæ”¾åˆ°è¿™ä¸ªä½ç½®
```

### jsxæ–‡ä»¶
1. å°†ä¸Šé¢å°è£…çš„Helloç»„ä»¶ï¼Œå•ç‹¬æ”¾åˆ°ä¸€ä¸ªHello.jsxæ–‡ä»¶ä¸­
    
    ```
    import React from 'react'
    function Hello(props) {
      return <div>
        <h1>è¿™æ˜¯åœ¨Helloç»„ä»¶ä¸­å®šä¹‰çš„å…ƒç´  --- {props.name}</h1>
        <p id="">å“ˆå“ˆå“ˆå“ˆ</p>
      </div>
    }
    
    // æŠŠåˆ›å»ºçš„ç»„ä»¶æš´éœ²å‡ºå»
    export default Hello
    ```
2. main.jsä¸­å¼•ç”¨
    
    ```
    import Hello from './components/Hello.jsx'
    ```
   
## classåˆ›å»ºç»„ä»¶
1. ç»„ä»¶çš„é¦–å­—æ¯å¿…é¡»æ˜¯å¤§å†™
2. ä½¿ç”¨ class åˆ›å»ºçš„ç±»ï¼Œé€šè¿‡ extends å…³é”®å­—ï¼Œç»§æ‰¿React.Componentï¼Œè¿™ä¸ªç±»ï¼Œå°±æ˜¯ä¸€ä¸ªç»„ä»¶çš„æ¨¡æ¿
3. åœ¨ class å®ç°çš„ç»„ä»¶å†…éƒ¨ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ª render å‡½æ•°
4. åœ¨ render å‡½æ•°ä¸­ï¼Œè¿”å›çš„æ˜¯JSXå†…å®¹ï¼Œå¦‚æœæ²¡æœ‰ä»€ä¹ˆéœ€è¦è¢«return çš„ï¼Œåˆ™éœ€è¦ return nullã€‚
5. å¦‚æœæƒ³è¦å¼•ç”¨è¿™ä¸ªç»„ä»¶ï¼Œå¯ä»¥æŠŠ ç±»çš„åç§°ï¼Œ ä»¥æ ‡ç­¾å½¢å¼ï¼Œå¯¼å…¥åˆ° JSX ä¸­ä½¿ç”¨
6. åˆ›å»ºä¸€ä¸ªHello2ç»„ä»¶
    
    ```
    import React from 'react'
    class Hello2 extends React.Component {
        // å¿…é¡»å®šä¹‰renderå‡½æ•°
        render() {
            // åœ¨ render å‡½æ•°ä¸­ï¼Œè¿˜å¿…é¡» return ä¸€ä¸ªä¸œè¥¿ï¼Œå¦‚æœæ²¡æœ‰ä»€ä¹ˆéœ€è¦è¢«return çš„ï¼Œåˆ™éœ€è¦ return null
            return <div>
              <h1>è¿™æ˜¯ ä½¿ç”¨ class ç±»åˆ›å»ºçš„ç»„ä»¶</h1>
            </div>
        }
    }
    ```
### ç»„ä»¶ä¸­çš„æ•°æ®
1. åœ¨ç»„ä»¶ä¸­çš„æ•°æ®ï¼Œå¯ä»¥åˆ†æˆä¸¤ç±»:
    1. å‚ä¸ç•Œé¢æ›´æ–°çš„æ•°æ®:å½“æ•°æ®å˜åŒ–æ—¶ï¼Œéœ€è¦æ›´æ–°ç»„ä»¶æŸ“çš„å†…å®¹ï¼Œ
    2. ä¸å‚ä¸ç•Œé¢æ›´æ–°çš„æ•°æ®:å½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¸éœ€è¦æ›´æ–°å°†ç»„å»ºæ¸²æŸ“çš„å†…å®¹;
2. å‚ä¸ç•Œé¢æ›´æ–°çš„æ•°æ®æˆ‘ä»¬ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºæ˜¯**å‚ä¸æ•°æ®æµ**ï¼Œè¿™ä¸ªæ•°æ®æ˜¯**å®šä¹‰åœ¨å½“å‰å¯¹è±¡çš„stateä¸­**
    1. å¯ä»¥é€šè¿‡åœ¨æ„é€ å‡½æ•°ä¸­ this.state ={å®šä¹‰çš„æ•°æ®}
    2. å½“æˆ‘ä»¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥è°ƒç”¨ this.setState æ¥æ›´æ–°æ•°æ®ï¼Œå¹¶ä¸”é€šçŸ¥Reactè¿›è¡Œupdateæ“ä½œ;
    3. åœ¨è¿›è¡Œupdateæ“ä½œæ—¶ï¼Œå°±ä¼šé‡æ–°è°ƒç”¨renderå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨æœ€æ–°çš„æ•°æ®ï¼Œæ¥æ¸²æŸ“ç•Œé¢
    4. **æ³¨æ„ï¼šthis.setStateæ–¹æ³•æ˜¯å¼‚æ­¥çš„ã€‚å¹¶ä¸èƒ½åœ¨æ‰§è¡Œå®ŒsetStateä¹‹åç«‹é©¬æ‹¿åˆ°æœ€æ–°çš„stateçš„ç»“æœ**
    
### ç»„ä»¶æ•°æ®ä¼ å€¼  

```
class Hello2 extends React.Component {
    constructor(props) {
    // æ³¨æ„ï¼š å¦‚æœä½¿ç”¨ extends å®ç°äº†ç»§æ‰¿ï¼Œé‚£ä¹ˆåœ¨ constructor çš„ç¬¬ä¸€è¡Œï¼Œä¸€å®šè¦æ˜¾ç¤ºè°ƒç”¨ä¸€ä¸‹ super()ï¼Œsuper() è¡¨ç¤ºçˆ¶ç±»çš„æ„é€ å‡½æ•°
    super(props)
    // åœ¨ constructor ä¸­ï¼Œå¦‚æœæƒ³è¦è®¿é—® props å±æ€§ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ this.propsï¼Œ è€Œæ˜¯éœ€è¦åœ¨ constructor çš„æ„é€ å™¨å‚æ•°åˆ—è¡¨ä¸­ï¼Œæ˜¾ç¤ºçš„å®šä¹‰ props å‚æ•°æ¥æ¥æ”¶ï¼Œæ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼›
    console.log(props)
    
        // æ³¨æ„ï¼š è¿™æ˜¯å›ºå®šå†™æ³•ï¼Œthis.state è¡¨ç¤º å½“å‰ç»„ä»¶å®ä¾‹çš„ç§æœ‰æ•°æ®å¯¹è±¡
        // å¦‚æœæƒ³è¦ä½¿ç”¨ ç»„ä»¶ä¸­ state ä¸Šçš„æ•°æ®ï¼Œç›´æ¥é€šè¿‡ this.state.*** æ¥è®¿é—®å³å¯
        this.state = {
          msg: 'è¿™æ˜¯ Hello2 ç»„ä»¶çš„ç§æœ‰msgæ•°æ®',
          info: 'ç“¦å¡”è¥¿***'
        }
    }
    render() {
        // è™½ç„¶åœ¨ React dev tools ä¸­ï¼Œå¹¶æ²¡æœ‰æ˜¾ç¤ºè¯´ class ç»„ä»¶ä¸­çš„ props æ˜¯åªè¯»çš„ï¼Œä½†æ˜¯ï¼Œç»è¿‡æµ‹è¯•å¾—çŸ¥ï¼Œå…¶å® åªè¦æ˜¯ ç»„ä»¶çš„ propsï¼Œéƒ½æ˜¯åªè¯»çš„ï¼›
        // this.props.address = '123'

        return <div>
          <h1>è¿™æ˜¯ ä½¿ç”¨ class ç±»åˆ›å»ºçš„ç»„ä»¶</h1>
          <h3>å¤–ç•Œä¼ é€’è¿‡æ¥çš„æ•°æ®æ˜¯ï¼š {this.props.address} --- {this.props.info}</h3>
          <h5>{this.state.msg}</h5>
        </div>
    }
    
}

ReactDOM.render(<div>
  <Hello2 address="xxx" info="XXXç¨‹åºå‘˜"></Hello2>
</div>, document.getElementById('app'))
```

### å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®
1. åœ¨Reactä¸­æ˜¯é€šè¿‡propsä¼ é€’æ¶ˆæ¯ï¼Œåªæ˜¯è®©çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨å­ç»„ä»¶ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°å³å¯ã€‚

```
//çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ¥æ”¶å­ç»„ä»¶çš„æ•°æ®ï¼Œå¹¶æ¸²æŸ“é¡µé¢
export class App extends Component { 
    constructor(){
        super()
        this.state ={
            counter: 180
        }
    }
    changecounter(count){
        this.setstate({ counter:this.state.counter + count})
    }
    render(){
        const{ counter }= this.state
        return(
            <div>
                <h2>å½“å‰è®¡æ•°:{counter}</h2>
                <Addcounter addclick={(count)=> this.changecounter(count)}/>
            </div>  
        )
    }
}

//å­ç»„ä»¶ç‚¹å‡»äº‹ä»¶å˜æ›´æ•°æ®ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‡½æ•°ï¼Œå°†å‚æ•°ä¼ é€’ç»™çˆ¶ç»„ä»¶
export class Addcounter extendsComponent {
    addcount(count) {
        console.log("count:",count)
        this.props.addclick(count)
    }
    render(){
    return(
        <div>
            <button onclick={e => this.addcount(1)}>+1</button>
        </div>
        )
    }
}
```

### è®¿é—®ç»„ä»¶çš„ç§æœ‰æ•°æ®

```
class Hello2 extends React.Component {
    constructor(props) {
        super(props)
        // æ³¨æ„ï¼š è¿™æ˜¯å›ºå®šå†™æ³•ï¼Œthis.state è¡¨ç¤º å½“å‰ç»„ä»¶å®ä¾‹çš„ç§æœ‰æ•°æ®å¯¹è±¡
        // å¦‚æœæƒ³è¦ä½¿ç”¨ ç»„ä»¶ä¸­ state ä¸Šçš„æ•°æ®ï¼Œç›´æ¥é€šè¿‡ this.state.*** æ¥è®¿é—®å³å¯
        this.state = {
          msg: 'è¿™æ˜¯ Hello2 ç»„ä»¶çš„ç§æœ‰msgæ•°æ®',
          info: 'ç“¦å¡”è¥¿***'
        }
    }
    
    render() {
        return <div>
          <h1>è¿™æ˜¯ ä½¿ç”¨ class ç±»åˆ›å»ºçš„ç»„ä»¶</h1>
          <h3>å¤–ç•Œä¼ é€’è¿‡æ¥çš„æ•°æ®æ˜¯ï¼š {this.props.address} --- {this.props.info}</h3>
          //è®¿é—®ç§æœ‰æ•°æ®
          <h5>{this.state.msg}</h5>
          
          //ä¿®æ”¹ç»„ä»¶ç§æœ‰æ•°æ®
          {/* 1.1 åœ¨Reactä¸­ï¼Œå¦‚æœæƒ³è¦ä¸ºå…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œä¸èƒ½ä½¿ç”¨ ç½‘é¡µä¸­ ä¼ ç»Ÿçš„ onclick äº‹ä»¶ï¼Œè€Œæ˜¯éœ€è¦ ä½¿ç”¨ React æä¾›çš„  onClick */}
          {/* 1.2 ä¹Ÿå°±æ˜¯è¯´ï¼šReactä¸­ï¼Œæä¾›çš„äº‹ä»¶ç»‘å®šæœºåˆ¶ï¼Œä½¿ç”¨çš„ éƒ½æ˜¯é©¼å³°å‘½åï¼ŒåŒæ—¶ï¼ŒåŸºæœ¬ä¸Šï¼Œä¼ ç»Ÿçš„ JS äº‹ä»¶ï¼Œéƒ½è¢« React é‡æ–°å®šä¹‰äº†ä¸€ä¸‹ï¼Œæ”¹æˆäº† é©¼å³°å‘½å onMouseMove  */}
          {/* 2.1 åœ¨ React æä¾›çš„äº‹ä»¶ç»‘å®šæœºåˆ¶ä¸­ï¼Œäº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼Œå¿…é¡»ç›´æ¥ç»™å®šä¸€ä¸ª functionï¼Œè€Œä¸æ˜¯ç»™å®šä¸€ä¸ª function çš„åç§° */}
          {/* 2.2 åœ¨ä¸º React äº‹ä»¶ç»‘å®š å¤„ç†å‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡ this.å‡½æ•°åï¼Œ æ¥æŠŠ å‡½æ•°çš„å¼•ç”¨äº¤ç»™ äº‹ä»¶ */}
          <input type="button" value="ä¿®æ”¹ msg" id="btnChangeMsg" onClick={this.changeMsg} />
          <br />

        </div>
    }
    
    changeMsg = () => {

    // ç›´æ¥ä½¿ç”¨ this.state.msg = '123' ä¸º state ä¸Šçš„æ•°æ®é‡æ–°èµ‹å€¼ï¼Œå¯ä»¥ä¿®æ”¹ state ä¸­çš„æ•°æ®å€¼ï¼Œä½†æ˜¯ï¼Œé¡µé¢ä¸ä¼šè¢«æ›´æ–°ï¼›
    // æ‰€ä»¥è¿™ç§æ–¹å¼ï¼ŒReact ä¸æ¨èï¼Œä»¥åå°½é‡å°‘ç”¨ï¼›
    // this.state.msg = '123'

    // å¦‚æœè¦ä¸º this.state ä¸Šçš„æ•°æ®é‡æ–°èµ‹å€¼ï¼Œé‚£ä¹ˆï¼ŒReact æ¨èä½¿ç”¨ this.setState({é…ç½®å¯¹è±¡}) æ¥é‡æ–°ä¸º state èµ‹å€¼,ä¸€æ—¦æ•°æ®å‘ç”Ÿæ”¹å˜é¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ï¼ï¼ï¼ï¼ï¼
    // æ³¨æ„ï¼š this.setState æ–¹æ³•ï¼Œåªä¼šé‡æ–°è¦†ç›–é‚£äº› æ˜¾ç¤ºå®šä¹‰çš„å±æ€§å€¼ï¼Œå¦‚æœæ²¡æœ‰æä¾›æœ€å…¨çš„å±æ€§ï¼Œåˆ™æ²¡æœ‰æä¾›çš„å±æ€§å€¼ï¼Œä¸ä¼šè¢«è¦†ç›–ï¼ˆinfoå±æ€§ï¼‰ï¼›
    /* this.setState({
      msg: '123'
    }) */

    // this.setState æ–¹æ³•ï¼Œä¹Ÿæ”¯æŒä¼ é€’ä¸€ä¸ª functionï¼Œå¦‚æœä¼ é€’çš„æ˜¯ functionï¼Œåˆ™åœ¨ function å†…éƒ¨ï¼Œå¿…é¡»return ä¸€ä¸ª å¯¹è±¡ï¼›
    // åœ¨ function çš„å‚æ•°ä¸­ï¼Œæ”¯æŒä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ prevStateï¼Œè¡¨ç¤ºä¸ºä¿®æ”¹ä¹‹å‰çš„ è€çš„ state æ•°æ®
    // ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ å¤–ç•Œä¼ é€’ç»™å½“å‰ç»„ä»¶çš„ props æ•°æ®
    this.setState(function (prevState, props) {
      // console.log(props)
      return {
        msg: '123'
      }
      
    }, function () {
        //callbackï¼šå›è°ƒå‡½æ•°
      // ç”±äº this.setState æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæƒ³è¦ç«‹å³æ‹¿åˆ°æœ€æ–°çš„ä¿®æ”¹ç»“æœï¼Œæœ€ä¿é™©çš„æ–¹å¼ï¼Œ åœ¨å›è°ƒå‡½æ•°ä¸­å»æ“ä½œæœ€æ–°çš„æ•°æ®
      console.log(this.state.msg)
    })
    // ç»è¿‡æµ‹è¯•å‘ç°ï¼Œ this.setState åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå†…éƒ¨æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œå½“ç«‹å³è°ƒç”¨å®Œ this.setState åï¼Œè¾“å‡º state å€¼å¯èƒ½æ˜¯æ—§çš„
    // console.log(this.state.msg)
  }
}
```

### Hello2å•ç‹¬åˆ›å»ºjsxç»„ä»¶
1. å°†ä»¥ä¸Šçš„Hello2ç»„ä»¶å•ç‹¬å°è£…åˆ°Hello2.jsxå¦‚ä¸‹ï¼š
    
    ```
    import React from 'react'
    export default class Hello2 extends React.Component {
        //....ä¸å˜
    }
    ```
2. main.jså¯¼å…¥
    
    ```
    // åœ¨ä½¿ç”¨ Hello ç»„ä»¶ä¹‹å‰ï¼Œå…ˆå¯¼å…¥ ç»„ä»¶
    import Hello2 from './components/Hello2.jsx'
    ```

## ä¸¤ç§åˆ›å»ºç»„ä»¶æ–¹å¼æ¯”è¾ƒ
1. ä½¿ç”¨ function æ„é€ å‡½æ•°åˆ›å»ºçš„ç»„ä»¶ï¼Œå†…éƒ¨æ²¡æœ‰ state ç§æœ‰æ•°æ®ï¼Œåªæœ‰ ä¸€ä¸ª props æ¥æ¥æ”¶å¤–ç•Œä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼›
2. ä½¿ç”¨ class å…³é”®å­— åˆ›å»ºçš„ç»„ä»¶ï¼Œå†…éƒ¨ï¼Œé™¤äº†æœ‰ this.props è¿™ä¸ªåªè¯»å±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª ä¸“é—¨ç”¨äº å­˜æ”¾è‡ªå·±ç§æœ‰æ•°æ®çš„ this.state å±æ€§ï¼Œè¿™ä¸ª state æ˜¯å¯è¯»å¯å†™çš„ï¼
3. ä½¿ç”¨ function åˆ›å»ºçš„ç»„ä»¶ï¼Œå«åš**æ— çŠ¶æ€ç»„ä»¶**ï¼›ä½¿ç”¨ class åˆ›å»ºçš„ç»„ä»¶ï¼Œå«åš**æœ‰çŠ¶æ€ç»„ä»¶**
4. æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ï¼Œæœ€æœ¬è´¨çš„åŒºåˆ«ï¼Œå°±æ˜¯æœ‰æ—  state å±æ€§ï¼›åŒæ—¶ï¼Œ class åˆ›å»ºçš„ç»„ä»¶ï¼Œæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä½†æ˜¯ï¼Œfunction åˆ›å»ºçš„ ç»„ä»¶ï¼Œæ²¡æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼›
5. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ æœ‰çŠ¶æ€ç»„ä»¶ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶å‘¢ï¼Ÿ
    1. å¦‚æœä¸€ä¸ªç»„ä»¶éœ€è¦å­˜æ”¾è‡ªå·±çš„ç§æœ‰æ•°æ®ï¼Œæˆ–è€…éœ€è¦åœ¨ç»„ä»¶çš„ä¸åŒé˜¶æ®µæ‰§è¡Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œæ­¤æ—¶ï¼Œéå¸¸é€‚åˆç”¨ class åˆ›å»ºå‡ºæ¥çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼›
    2. å¦‚æœä¸€ä¸ªç»„ä»¶ï¼Œåªéœ€è¦æ ¹æ®å¤–ç•Œä¼ é€’è¿‡æ¥çš„ propsï¼Œæ¸²æŸ“å›ºå®šçš„ é¡µé¢ç»“æ„å°±å®Œäº‹å„¿äº†ï¼Œæ­¤æ—¶ï¼Œéå¸¸é€‚åˆä½¿ç”¨ function åˆ›å»ºå‡ºæ¥çš„ æ— çŠ¶æ€ç»„ä»¶ï¼›ï¼ˆä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶çš„å°å°å¥½å¤„ï¼š ç”±äºå‰”é™¤äº†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥ï¼Œè¿è¡Œé€Ÿåº¦ä¼šç›¸å¯¹å¿«ä¸€äº›ï¼‰
    
### props&state
1. propså±æ€§åªè¯»ï¼Œä¸èƒ½ä¿®æ”¹
2. stateä¸ºç»„ä»¶ç§æœ‰æ•°æ®å±æ€§ï¼Œä¸€æ—¦é€šè¿‡`this.setState({é…ç½®å¯¹è±¡})`è®¾ç½®ï¼Œè‡ªåŠ¨åˆ·æ–°é¡µé¢.


## Reactç»„ä»¶çš„æ’æ§½
1. åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æŠ½å–äº†ä¸€ä¸ªç»„ä»¶ï¼Œä½†æ˜¯ä¸ºäº†è®©è¿™ä¸ªç»„ä»¶å…·å¤‡æ›´å¼ºçš„é€šç”¨æ€§ï¼Œæˆ‘ä»¬ä¸èƒ½å°†ç»„ä»¶ä¸­çš„å†…å®¹é™åˆ¶ä¸ºå›ºå®šçš„divã€spanç­‰ç­‰è¿™äº›å…ƒç´ ã€‚
2. Reactå¯¹äºè¿™ç§éœ€è¦æ’æ§½çš„æƒ…å†µéå¸¸çµæ´»ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥å®ç°:
    1. ç»„ä»¶çš„childrenå­å…ƒç´ ;
    2. propså±æ€§ä¼ é€’Reactå…ƒç´ ;

### childrenå­å…ƒç´ å®ç°æ’æ§½

```
export class App extends Component {
    render(){
        return(
            <div>
                {/*ç»™å¯¼èˆªæ ç»„ä»¶ä¼ é€’å­å…ƒç´ */}
                <NavBar>
                <button>æŒ‰é’®</button>
                <h2>æˆ‘æ˜¯æ ‡é¢˜</h2>
                <i>æ–œä½“æ–‡å­—</i>
                </NavBar>
            </div>
        )
    }
}
//é€šç”¨å¯¼èˆªæ ç»„ä»¶
export class NavBar extends Component {
    render(){
        //è·å–åˆ°NavBarç»„ä»¶çš„å­å…ƒç´ 
        //æ³¨æ„ï¼ï¼ï¼ï¼šå¦‚æœå¤–éƒ¨ä¼ é€’ç»™NavBarçš„å­å…ƒç´ åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆè¿™ä¸ªchildrenå°±ä¸æ˜¯ç´ ç»„äº†ï¼Œè€Œæ˜¯è¿™ä¸ªå”¯ä¸€çš„å­å…ƒç´ 
        const {children }= this.props
        return(
            <div className='nav-bar'>
                <div className="left">{children[0]}</div>
                <div className="center">{children[1]}</div>
                <div className="right">{children[2]}</div>
            </div>
        )
    }
}
```

### propså±æ€§å®ç°æ’æ§½

```
export class App extends Component {
    render(){
        return(
            <div>
                {/*ç»™å¯¼èˆªæ ç»„ä»¶ä¼ é€’props*/}
                <NavBarTwo
                    leftslot={<button>æŒ‰é’®2</button>}
                    centerslot={<h2>å‘µå‘µå‘µ</h2>}
                    rightslot={<i>æ–œä½“2</i>}
                />
            </div>
        )
    }
}
//é€šç”¨å¯¼èˆªæ ç»„ä»¶
export class NavBar extends Component {
    render(){
        const {leftslot, centerslot, rightslot} = this.props
        return(
            <div className='nav-bar'>
                <div className="left">{leftslot}</div>
                <div className="center">{centerSlot}</div>
                <div className="right">{rightslot}</div>      
            </div>
        )
    }
}
```

## refè·å–ç»„ä»¶å’Œç»„ä»¶ä¸­çš„DOM

### ç»„ä»¶ä¸­å¦‚ä½•è·å–DOM
1. åœ¨Reactçš„å¼€å‘æ¨¡å¼ä¸­ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸éœ€è¦ã€ä¹Ÿä¸å»ºè®®ç›´æ¥æ“ä½œDOMåŸç”Ÿï¼Œä½†æ˜¯æŸäº›ç‰¹æ®Šçš„æƒ…å†µï¼Œç¡®å®éœ€è¦è·å–åˆ°DOMè¿›è¡ŒæŸäº›æ“ä½œ.
2. å®˜æ–¹ä¸å»ºè®®ç”¨jsåŸç”Ÿæ–¹æ³•è·å–DOMã€‚
3. å¯ä»¥é€šè¿‡è®¾ç½®refsæ¥è·å–DOM,æœ‰ä¸‰ç§æ–¹å¼ï¼š
    
    ```
    import React,{ Purecomponent, createRef}from'react'
    export class App extends Purecomponent{
        constructor() {
            super()
            this.titleRef= createRef()
            this.titleel = nul1
        }
        getNativeDoM(){
            //1.æ–¹å¼ä¸€:åœ¨Reactå…ƒç´ ä¸Šç»‘å®šä¸€ä¸ªrefå­—ç¬¦ä¸²
            //console.log(this.refs.coderzhong)
            //2.æ–¹å¼äºŒ:æå‰åˆ›å»ºå¥½refå¯¹è±¡ï¼ŒcreateRef()ï¼Œå°†åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ç»‘å®šåˆ°å…ƒç´ ï¼Œæœ€å¸¸ç”¨è¯¥æ–¹æ³•
            //console.log(this.titleRef.current)
            //3.æ–¹å¼ä¸‰:ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨å¯¹åº”çš„å…ƒç´ è¢«æ¸²æŸ“ä¹‹åï¼Œå›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œå¹¶ä¸”å°†å…ƒç´ ä¼ å…¥
            console.log(this.titleEl)
        }
        render(){
            return(
                <div>
                    <h2 ref="coderzhong">Hello World</h2>
                    <h2 ref={this.titleRef}>ä½ å¥½å•Š,xxx</h2>
                    <h2 ref={el =>{ this.titleEl = el }}>ä½ å¥½å•Š</h2>
                    <button onclick={e => this.getNativeDoM()]>è·å–DOM</button>
                </div>
        }
    }
    export default App
    ```

### refè·å–ç»„ä»¶
1. è·å–ç±»ç»„ä»¶å®ä¾‹
    
    ```
    export class App extends Purecomponent{
        constructor(){
            super()
            this.hwRef = createRef()
        }
        getcomponent(){
            //è·å–Helloworldç»„ä»¶
            console.log(this.hwRef.current)
            //è°ƒç”¨Helloworldç»„ä»¶å†…éƒ¨çš„å®ä¾‹æ–¹æ³•
            this.hwRef.current.test();
        }
        render(){
            return(
                <div>
                    <Helloworld ref={this.hwRef}/>
                    <button onclick={e =>this.getcomponent()}>è·å–ç»„ä»¶å®ä¾‹</button>
                </div>
            )
        }
    }
    ```
2. æ— æ³•è·å–å‡½æ•°å¼ç»„ä»¶ï¼Œä½†æ˜¯å¯ä»¥è·å–å‡½æ•°å¼ç»„ä»¶ä¸­çš„domï¼ˆç•¥ï¼‰

## å—æ§ç»„ä»¶ã€éå—æ§ç»„ä»¶
1. åœ¨ HTML ä¸­ï¼Œè¡¨å•å…ƒç´ (å¦‚`<input>ã€<textarea>å’Œ<select>`)ä¹‹ç±»çš„è¡¨å•å…ƒç´ é€šå¸¸è‡ªå·±ç»´æŠ¤ stateï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥è¿›è¡Œæ›´æ–°ã€‚å³ï¼šæ¯”å¦‚inputç”¨é”®ç›˜è¾“å…¥å†…å®¹ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ˜¾ç¤ºåˆ°è¾“å…¥æ¡†å†…ã€‚----éå—æ§ç»„ä»¶
2. è€Œåœ¨ React ä¸­ï¼Œå¯å˜çŠ¶æ€(mutable state)é€šå¸¸ä¿å­˜åœ¨ç»„ä»¶çš„ state å±æ€§ä¸­ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ä½¿ç”¨ setState()æ¥æ›´æ–°.å³reactåˆ·æ–°é¡µé¢å¿…é¡»é€šè¿‡setStateã€‚-----å—æ§ç»„ä»¶
3. è¿™ä¸ªâ€œå—æ§â€æŒ‡çš„æ˜¯ï¼šè¢«Reactæ§åˆ¶ï¼Œç”¨setStateæ¥æ¸²æŸ“ç•Œé¢ã€‚
4. é‚£ä¹ˆå¦‚ä½•å°†â€œéå—æ§ç»„ä»¶â€è½¬å˜ä¸ºå—æ§ç»„ä»¶å‘¢ï¼Ÿ
    1. ç»™éå—æ§ç»„ä»¶ç»‘å®švalueå€¼ã€‚
    2. ç›‘å¬éå—æ§ç»„ä»¶çš„è¾“å…¥æ“ä½œonchangeã€‚
    3. ä½¿ç”¨setStateæ¥æ¸²æŸ“éå—æ§ç»„ä»·
5. **æ³¨æ„ï¼š** ä»¥ä¸Š3ä¸ªæ¡ä»¶ç¼ºä¸€ä¸å¯ï¼Œå¦‚æœåªæœ‰1ï¼Œé‚£ä¹ˆinputåˆ™ä¸å¯ä»¥è¾“å…¥æ–‡æœ¬ã€‚
6. ä¸¾ä¾‹ï¼š
    
    ```
    constructor(){
        super()
        //ç»™inputèµ‹é»˜è®¤å€¼
        this.state = {username : "123"}
    }
    inputchange(event){
        console.log("inputchange:",event.target.value)
        //3. ä½¿ç”¨setStateæ¥æ¸²æŸ“éå—æ§ç»„ä»·
        this.setstate({ username:event.target.value })
    }
    render(){
        const { username}=this.state
        return(
            <div>
                {/*å—æ§ç»„ä»¶ï¼š1. ç»™éå—æ§ç»„ä»¶ç»‘å®švalueå€¼ã€‚2. ç›‘å¬éå—æ§ç»„ä»¶çš„è¾“å…¥æ“ä½œonchange*/}
                <input type="text" value={username} onchange={le=>this.inputchange(e)}/>
            </div>
        )
    }
    ```

## é«˜é˜¶ç»„ä»¶
1. é«˜é˜¶å‡½æ•°ï¼šæ¥æ”¶ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‡½æ•°åšä¸ºè¾“å…¥ï¼Œæˆ–è€…è¾“å‡ºä¸€ä¸ªå‡½æ•°ã€‚
2. é«˜é˜¶ç»„ä»¶ï¼šHigher-Order Componentsï¼Œç®€ç§°ä¸º HOCï¼Œé«˜é˜¶ç»„ä»¶**æ˜¯**å‚æ•°ä¸ºç»„ä»¶è¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„**å‡½æ•°**;
    1. é«˜é˜¶ç»„ä»¶ æœ¬èº«ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°;
    2. è¿™ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œ

### ä½¿ç”¨åœºæ™¯
1. å¯ä»¥å¯¹ç»„ä»¶è¿›è¡Œè¿‡æ»¤å°è£…
2. æ¨¡æ‹Ÿç™»å½•ç•Œé¢ï¼šç™»å½•å°±å±•ç¤ºè´­ç‰©è½¦ï¼Œæœªç™»å½•å°±å±•ç¤ºè¯·ç™»å½•ï¼ŒæŠŠè¿™ä¸ªæ˜¯å¦ç™»å½•çš„åˆ¤æ–­æ”¾åˆ°ç»„ä»¶ä¸­
    
    ```
    //App.jsx
    import React, { PureComponent } from 'react'
    import Cart from './pages/Cart'
    
    export class App extends PureComponent {
      constructor() {
        super()
      }
    
      loginClick() {
        //æ¨¡æ‹Ÿç™»å½•
        localStorage.setItem("token", "coderzh")
        // å¼ºåˆ¶æ›´æ–°
        this.forceUpdate()
      }
    
      render() {
        return (
          <div>
            App
            <button onClick={e => this.loginClick()}>ç™»å½•</button>
            <Cart/>
          </div>
        )
      }
    }
    export default App
    
    //é«˜é˜¶ç»„ä»¶ï¼Œç”¨äºåˆ¤æ–­
    function loginAuth(OriginComponent) {
      return props => {
        // ä»localStorageä¸­è·å–token
        const token = localStorage.getItem("token")
    
        if (token) {
          return <OriginComponent {...props}/>
        } else {
          return <h2>è¯·å…ˆç™»å½•, å†è¿›è¡Œè·³è½¬åˆ°å¯¹åº”çš„é¡µé¢ä¸­</h2>
        }
      }
    }
    
    export default loginAuth
    
    //è´­ç‰©è½¦ç»„ä»¶
    import React, { PureComponent } from 'react'
    import loginAuth from '../hoc/login_auth'
    
    export class Cart extends PureComponent {
      render() {
        return (
          <h2>Cart Page</h2>
        )
      }
    }
    //è°ƒç”¨é«˜é˜¶ç»„ä»¶å‡½æ•°
    export default loginAuth(Cart)
    ```

## fragment
1. åœ¨ä¹‹å‰çš„å¼€å‘ä¸­ï¼Œæ€»æ˜¯åœ¨ä¸€ä¸ªç»„ä»¶ä¸­è¿”å›å†…å®¹æ—¶åŒ…è£¹ä¸€ä¸ªdivå…ƒç´ ï¼š
2. ä¹Ÿå¯ä»¥ä¸æ¸²æŸ“è¿™æ ·ä¸€ä¸ªdivï¼šä½¿ç”¨Fragmentï¼ŒFragment å…è®¸å°†å­åˆ—è¡¨åˆ†ç»„ï¼Œè€Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹ï¼›
3. Reactè¿˜æä¾›äº†Fragmentçš„çŸ­è¯­æ³•ï¼šå®ƒçœ‹èµ·æ¥åƒç©ºæ ‡ç­¾ `<> </>`
    
    ```
    export class App extends Purecomponent {
        render(){
            return (
                {/**Fragmentä¸ä¼šè¢«æ¸²æŸ“/}
                <Fragment>
                    <h2>æˆ‘æ˜¯Appçš„æ ‡é¢˜</h2>
                </Fragment>
            )
        }
    }
    export default App
    ```



## ç»„ä»¶çš„CSSæ ·å¼å¯¼å…¥
1. å®ç°åœºæ™¯ï¼šå®ç°ä¸€ä¸ªè¯„è®ºåˆ—è¡¨ï¼Œæ•°æ®æºå¦‚ä¸‹ï¼š
    
    ```
    CommentList = [
        { user: 'å¼ ä¸‰', content: 'å“ˆå“ˆï¼Œæ²™å‘' },
        { user: 'å¼ ä¸‰2', content: 'å“ˆå“ˆï¼Œæ¿å‡³' },
        { user: 'å¼ ä¸‰3', content: 'å“ˆå“ˆï¼Œå‡‰å¸­' },
        { user: 'å¼ ä¸‰4', content: 'å“ˆå“ˆï¼Œç –å¤´' },
        { user: 'å¼ ä¸‰5', content: 'å“ˆå“ˆï¼Œæ¥¼ä¸‹å±±ç‚®' }
    ]
    ```
2. åˆ›å»ºCommentList.jsx
    
    ```
    import React from 'react'
    // å¯¼å…¥å½“å‰ç»„ä»¶éœ€è¦çš„å­ç»„ä»¶
    import CommentItem from './CommentItem.jsx'
    // è¯„è®ºåˆ—è¡¨ç»„ä»¶
    export default class CommentList extends React.Component {
      constructor(props) {
        super(props)
    
        // å®šä¹‰å½“å‰è¯„è®ºåˆ—è¡¨ç»„ä»¶çš„ ç§æœ‰æ•°æ®
        this.state = {
          cmts: [
            { user: 'å¼ ä¸‰', content: 'å“ˆå“ˆï¼Œæ²™å‘' },
            { user: 'å¼ ä¸‰2', content: 'å“ˆå“ˆï¼Œæ¿å‡³' },
            { user: 'å¼ ä¸‰3', content: 'å“ˆå“ˆï¼Œå‡‰å¸­' },
            { user: 'å¼ ä¸‰4', content: 'å“ˆå“ˆï¼Œç –å¤´' },
            { user: 'å¼ ä¸‰5', content: 'å“ˆå“ˆï¼Œæ¥¼ä¸‹å±±ç‚®' }
          ]
        }
      }
    
      // åœ¨ æœ‰çŠ¶æ€ç»„ä»¶ä¸­ï¼Œ render å‡½æ•°æ˜¯å¿…é¡»çš„ï¼Œè¡¨ç¤ºï¼Œæ¸²æŸ“å“ªäº› è™šæ‹ŸDOMå…ƒç´ å¹¶å±•ç¤ºå‡ºæ¥
      render() {
        //è¿”å›æ¯ä¸€è¡Œitem
        return <div>
          {/* æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ JSX è¯­æ³•å†…éƒ¨ï¼Œä½¿ç”¨ æ•°ç»„çš„ map å‡½æ•°ï¼Œæ¥éå†æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œå¹¶ä½¿ç”¨ map è¿”å›æ“ä½œåçš„æœ€æ–°çš„æ•°ç»„ */}
          {this.state.cmts.map((item, i)  => {
            return <div key={i}>
                <h1>è¯„è®ºäººï¼š{item.user}</h1>
                <h1>è¯„è®ºå†…å®¹ï¼š{item.content}</h1>
            </div>
          })}
        </div>
      }
    }
    ```
3. main.js
    
    ```
    // JSæ‰“åŒ…å…¥å£æ–‡ä»¶
    // 1. å¯¼å…¥ ReactåŒ…
    import React from 'react'
    import ReactDOM from 'react-dom'
    // å¯¼å…¥è¯„è®ºåˆ—è¡¨ç»„ä»¶
    import CommentList from './components/comment1/CommentList.jsx'
    ReactDOM.render(<div>
      <CommentList></CommentList>
    </div>, document.getElementById('app'))
    ```
4. å°è£…è¯„è®ºé¡¹ï¼šCommentItem
    1. æŠŠåˆ—è¡¨çš„æ¯ä¸€è¡Œå°è£…æˆä¸€ä¸ªitem
    2. æ–°å»ºCommentItem.jsx
    
    
    ```
    import React from 'react'
    // å°è£…ä¸€ä¸ª è¯„è®ºé¡¹ ç»„ä»¶ï¼Œæ­¤ç»„ä»¶ç”±äºä¸éœ€è¦è‡ªå·±çš„ ç§æœ‰æ•°æ®ï¼Œæ‰€ä»¥ç›´æ¥å®šä¹‰ä¸º æ— çŠ¶æ€ç»„ä»¶
    export default function CommentItem(props) {
        return <div>
            <h1>è¯„è®ºäººï¼š{props.user}</h1>
            <h1>è¯„è®ºå†…å®¹ï¼š{props.content}</h1>
        </div>
    }
    ```
5. CommentList.jsxä¸­è¿”å›æ¯ä¸€è¡Œitemä¿®æ”¹
    
    ```
    
    return <div>
      <h1 className="title">è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹</h1>
      {/* æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ JSX è¯­æ³•å†…éƒ¨ï¼Œä½¿ç”¨ æ•°ç»„çš„ map å‡½æ•°ï¼Œæ¥éå†æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œå¹¶ä½¿ç”¨ map è¿”å›æ“ä½œåçš„æœ€æ–°çš„æ•°ç»„ */}
      {this.state.cmts.map((item, i) => {
        // return <CommentItem user={item.user} content={item.content} key={i}></CommentItem>
        return <CommentItem {...item} key={i}></CommentItem>
      })}
    </div>
    ```

### styleå†…è”æ ·å¼:ç»™CommentItemæ·»åŠ æ ·å¼
1. å¦‚ä½•æ·»åŠ æ ·å¼ï¼ŸCommentItem.jsæ–‡ä»¶
    
    ```
    // æ³¨æ„ï¼š å¦‚æœè¦ä½¿ç”¨ style å±æ€§ï¼Œä¸º JSX è¯­æ³•åˆ›å»ºçš„DOMå…ƒç´ ï¼Œè®¾ç½®æ ·å¼ï¼Œä¸èƒ½åƒç½‘é¡µä¸­é‚£ä¹ˆå†™æ ·å¼ï¼›è€Œæ˜¯è¦ä½¿ç”¨JSè¯­æ³•æ¥å†™æ ·å¼
    // åœ¨ å†™ style æ ·å¼çš„æ—¶å€™ï¼Œå¤–å±‚çš„ { } è¡¨ç¤º è¦å†™JSä»£ç äº†ï¼Œå†…å±‚çš„ { } è¡¨ç¤º ç”¨ä¸€ä¸ªJSå¯¹è±¡è¡¨ç¤ºæ ·å¼
    // æ³¨æ„ï¼š åœ¨ style çš„æ ·å¼è§„åˆ™ä¸­ï¼Œå¦‚æœ å±æ€§å€¼çš„å•ä½æ˜¯ px, åˆ™ px å¯ä»¥çœç•¥ï¼Œç›´æ¥å†™ä¸€ä¸ª æ•°å€¼ å³å¯
    export default function CommentItem(props) {
        return <div style={{border:'1px solid #ccc',margin:'10px 0',paddingLeft:15}}>
            <h1 style={{fontSize:16,color:'purple'}}>è¯„è®ºäººï¼š{props.user}</h1>
            <h1 style={{fontSize:14,color:'red'}}>è¯„è®ºå†…å®¹ï¼š{props.content}</h1>
        </div>
    }
    ```
2. ä¼˜åŒ–
    
     ```
    export default function CommentItem(props) {
        //å•ç‹¬å°è£…æˆå¯¹è±¡
        const boxStyle = { border: '1px solid #ccc', margin: '10px 0', paddingLeft: 15 }
       const titleStyle = { fontSize: 16, color: "purple" }
       const bodyStyle = { fontSize: 14, color: "red" } 
       //ç›´æ¥ä½¿ç”¨å¯¹è±¡
        return <div style={boxStyle}>
            <h1 style={titleStyle}>è¯„è®ºäººï¼š{props.user}</h1>
            <h1 style={bodyStyle}>è¯„è®ºå†…å®¹ï¼š{props.content}</h1>
        </div>
    }
    ```
3. ä¼˜åŒ–2
    
    ```
    //æŠŠ æ ·å¼å¯¹è±¡ï¼Œå°è£…åˆ°å”¯ä¸€çš„ä¸€ä¸ªå¯¹è±¡ä¸­
    const inlineStyles = {
        boxStyle: { border: '1px solid #ccc', margin: '10px 0', paddingLeft: 15 },
        titleStyle: { fontSize: 16, color: "purple" },
        bodyStyle: { fontSize: 14, color: "red" }
      }
    return <div style={inlineStyles.boxStyle}>
        <h1 style={inlineStyles.titleStyle}>è¯„è®ºäººï¼š{props.user}</h1>
        <h3 style={inlineStyles.bodyStyle}>è¯„è®ºå†…å®¹ï¼š{props.content}</h3>
    </div>
    ```
4. ä¼˜åŒ–3ï¼š
    1. å°†æ ·å¼ç‹¬ç«‹å°è£…åˆ°cmtItemStyle.jsæ–‡ä»¶ä¸­å»
    
        ```
        // å¯¼å…¥ä¸€ä¸ª æ ·å¼çš„å¯¹è±¡
        export default {
          boxStyle: { border: '1px solid #ccc', margin: '10px 0', paddingLeft: 15 },
          titleStyle: { fontSize: 16, color: "purple" },
          bodyStyle: { fontSize: 14, color: "red" }
        }
        ```
    2. CommentItem.jsæ–‡ä»¶å¯¼å…¥cmtItemStyle.js
        
        ```
        import inlineStyles from './cmtItemStyles.js'
        ```

### CSSå¤–è”æ ·å¼å¯¼å…¥ä½¿ç”¨
>ä¼˜åŒ–4ï¼šCommentItem.jsä¸­ä¸é‡‡ç”¨è¡Œå†…æ ·å¼styleæ–¹å¼

1. æ–°å»ºCommentItem.css
    
    ```
    /* æ³¨æ„ï¼šå½“å¯ç”¨ CSS æ¨¡å—åŒ–ä¹‹åï¼Œè¿™é‡Œæ‰€æœ‰çš„ç±»åï¼Œéƒ½æ˜¯ç§æœ‰çš„ï¼Œå¦‚æœæƒ³è¦æŠŠç±»åè®¾ç½®æˆå…¨å±€çš„ä¸€ä¸ªç±»ï¼Œå¯ä»¥æŠŠè¿™ä¸ªç±»åï¼Œç”¨ :global() ç»™åŒ…è£¹èµ·æ¥ */
    /* å½“ä½¿ç”¨ :global() è®¾ç½®äº†å…¨å±€çš„ ç±»æ ·å¼ä¹‹åï¼Œè¿™ä¸ªç±»ä¸ä¼šè¢«é‡å‘½å */
    //ç§æœ‰
    .box{
      border: 1px solid #ccc;
      padding-left: 15px;
      box-shadow: 0 0 6px #ccc;
      margin: 10px 0;
    }
    //å…¬æœ‰ï¼Œé€šè¿‡æ™®é€šæ–¹å¼å¯¼å…¥å½“å‰CSSæ–‡ä»¶çš„éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚CommentList.jsxé€šè¿‡import CommentItem from './CommentItem.jsx'ï¼Œå¯¼å…¥ï¼Œåªèƒ½ä½¿ç”¨:globalé…ç½®çš„csså±æ€§
    /* åªæœ‰ç§æœ‰çš„ç±»æ‰ä¼šè¢«é‡å‘½å */
    :global(.title){
      color:red;
      text-align: center;
    }
    //ç§æœ‰ï¼šåªæœ‰é€šè¿‡æ¨¡å—åŒ–å¯¼å…¥å½“å‰CSSæ–‡ä»¶çš„æ‰èƒ½è¢«ä½¿ç”¨
    .title{
      color: green;
      font-size: 16px;
    }
    //ç§æœ‰
    .body{
      font-size: 14px;
      color:red;
    }
    ```
2. **æ¨¡å—åŒ–CSS**ï¼šå¯¼å…¥CSSæ—¶èƒ½å¤Ÿé™åˆ¶å¯¼å…¥çš„CSSåªèƒ½ç”¨äºå½“å‰æ–‡ä»¶ï¼Œé¿å…cssä¸²ç”¨
    1. åœ¨CommentItem.jså¯¼å…¥CommentItem.css
    
    ```
    // å¯¼å…¥è¯„è®ºé¡¹çš„æ ·å¼æ–‡ä»¶ã€è¿™ç§ç›´æ¥ import '../è·¯å¾„æ ‡è¯†ç¬¦' çš„ CSS å¯¼å…¥å½¢å¼ï¼Œå¹¶ä¸æ˜¯æ¨¡å—åŒ–çš„CSSã€‘
    // import '../../css/commentItem.css'
    // é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰ä¸º CSS å¯ç”¨æ¨¡å—åŒ–ï¼Œåˆ™æ¥æ”¶åˆ°çš„ itemStyles æ˜¯ä¸ªç©ºå¯¹è±¡ï¼Œå› ä¸º .css æ ·å¼è¡¨ä¸­ï¼Œä¸èƒ½ç›´æ¥é€šè¿‡ JS çš„ export defualt å¯¼å‡ºå¯¹è±¡
    // å½“å¯ç”¨ CSS æ¨¡å—åŒ–ä¹‹åï¼ˆåœ¨webpack.config.jsä¸­é…ç½®å¯ç”¨CSSæ¨¡å—åŒ–ï¼Œmodules:trueï¼‰ï¼Œå¯¼å…¥ æ ·å¼è¡¨å¾—åˆ°çš„ itemStyles å°±å˜æˆäº†ä¸€ä¸ª æ ·å¼å¯¹è±¡ï¼Œå…¶ä¸­ï¼Œå±æ€§åæ˜¯ åœ¨æ ·å¼è¡¨ä¸­å®šä¹‰çš„ç±»åï¼Œå±æ€§å€¼ï¼Œæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå¤æ‚çš„ç±»åï¼ˆé˜²æ­¢ç±»åå†²çªï¼‰
    import itemStyles from '../../css/commentItem.css'
    console.log(itemStyles)
    
    ...

    return <div className={itemStyles.box}>
        <h1 className={itemStyles.title}>è¯„è®ºäººï¼š{props.user}</h1>
        <h3 className={itemStyles.body}>è¯„è®ºå†…å®¹ï¼š{props.content}</h3>
    </div>
    ...
    ```
   
#### css modules
1. css moduleså¹¶ä¸æ˜¯Reactç‰¹æœ‰çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯æ‰€æœ‰ä½¿ç”¨äº†ç±»ä¼¼äºwebpacké…ç½®çš„ç¯å¢ƒä¸‹éƒ½å¯ä»¥ä½¿ç”¨çš„ã€‚
    1. å¦‚æœåœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è‡ªå·±æ¥è¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚é…ç½®webpack.config.jsä¸­çš„modules: trueç­‰ã€‚
2. Reactçš„è„šæ‰‹æ¶å·²ç»å†…ç½®äº†css modulesçš„é…ç½®
3. ä½¿ç”¨æ–¹å¼
    1. å°†XXX.css/.less/.scss ç­‰æ ·å¼æ–‡ä»¶éƒ½éœ€è¦ä¿®æ”¹æˆ XXX.module.css/.module.less/.module.scss
    2. å¼•å…¥ï¼š `import itemStyles from '../../css/commentItem.module.css'`
4. ä¸¾ä¾‹ä½¿ç”¨ï¼š
    
    ```
    //APP.module.cssæ–‡ä»¶
    .title {
      font-size: 32px;
      color: green;
    }
    
    .content {
      font-size: 22px;
      color: orange;
    }
    
    .hy-title {
      
    }
    
    //App.jsx
    import React, { PureComponent } from 'react'
    import appStyle from "./App.module.css"

    export class App extends PureComponent {
      render() {
        return (
          <div>
            <h2 className={appStyle.title}>æˆ‘æ˜¯æ ‡é¢˜</h2>
            <p className={appStyle.content}>æˆ‘æ˜¯å†…å®¹, å“ˆå“ˆå“ˆå“ˆ</p>
          </div>
        )
      }
    }
    
    export default App
    ```
    
## ç»‘å®šthiså¹¶ä¼ å‚çš„ä¸‰ç§æ–¹å¼
1. å¦‚æœrenderä¸­çš„æ ‡ç­¾ç‚¹å‡»äº‹ä»¶ç»‘å®šçš„æ˜¯æ™®é€šå‡½æ•°ï¼Œé‚£ä¹ˆæ™®é€šå‡½æ•°ä¸­çš„thisæŒ‡å‘æ˜¯undefind.
2. è§£å†³æ–¹æ¡ˆï¼š
    1. ä½¿ç”¨bind
    2. ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼šæŠŠå½“å‰å‡½æ•°å˜æˆç®­å¤´å‡½æ•°
    3. ä½¿ç”¨call/apply

### æ–¹å¼ä¸€ï¼šbindç»‘å®šä¼ é€’
1. bind çš„ä½œç”¨ï¼šä¿®æ”¹å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘ï¼Œè®©å‡½æ•°å†…éƒ¨çš„thisï¼ŒæŒ‡å‘bind å‚æ•°åˆ—è¡¨ä¸­çš„ ç¬¬ä¸€ä¸ªå‚æ•°
2. bind å’Œ call/apply ä¹‹é—´çš„åŒºåˆ«ï¼šcall/apply ä¿®æ”¹å®ŒthisæŒ‡å‘åï¼Œä¼šç«‹å³è°ƒç”¨å‰é¢çš„å‡½æ•°ï¼Œä½†æ˜¯ bind åªæ˜¯ä¿®æ”¹thisæŒ‡å‘ï¼Œå¹¶ä¸ä¼šè°ƒç”¨ã€‚
3. **æ³¨æ„ï¼š** bind ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ç”¨æ¥ä¿®æ”¹ this æŒ‡å‘çš„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°åé¢çš„æ‰€æœ‰å‚æ•°ï¼Œéƒ½ä¼šå½“ä½œå°†æ¥è°ƒç”¨ å‰é¢å‡½æ•° æ—¶å€™çš„å‚æ•°ä¼ é€’è¿›å»
4. åˆ›å»ºBindThis.jsxç»„ä»¶
    
    ```
    import React from 'react'
    export default class BindThis extends React.Component {
      constructor(props) {
        super(props)
        this.state = {
          msg: 'è¿™æ˜¯é»˜è®¤çš„msg'
        }
      }
      //renderä¸­çš„æ ‡ç­¾ç‚¹å‡»äº‹ä»¶ç»‘å®šçš„æ˜¯æ™®é€šå‡½æ•°
      render() {
        return <div>
          <h1>ç»‘å®šThiså¹¶ä¼ å‚çš„å‡ ç§æ–¹å¼</h1>
          {/* æ–¹å¼1ï¼šåœ¨ äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œç›´æ¥ä½¿ç”¨ bind ç»‘å®š this å¹¶ä¼ å‚ */}
          <input type="button" value="ç»‘å®šthiså¹¶ä¼ å‚çš„æ–¹å¼1" onClick={this.changeMsg1.bind(this, 'ğŸ·', 'ğŸ•')} />
          <hr />
          <h3>{this.state.msg}</h3>
        </div>
      }
    
      /**
      * æ™®é€šå®ä¾‹å‡½æ•°
      * æ³¨æ„ï¼šè¿™é‡Œçš„æ–¹å¼ï¼Œæ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œå› æ­¤ï¼Œåœ¨è§¦å‘çš„æ—¶å€™ï¼Œè¿™é‡Œçš„ this æ˜¯ undefined
       */
      changeMsg1(arg1, arg2,event) {
        //event,é»˜è®¤ä¼ é€’
        // console.log(this);
        this.setState({
          msg: 'ç»‘å®šthiså¹¶ä¼ å‚çš„æ–¹å¼1' + arg1 + arg2
        })
      }
    }
    ```
2. main.jså¯¼å…¥
    
    ```
    import BindThis from './components/BindThis.jsx'
    //renderä¸­æ¸²æŸ“
    ReactDOM.render(<div>
    <BindThis></BindThis>
    </div>, document.getElementById('app'))
    ```

### æ–¹å¼äºŒï¼šåœ¨æ„é€ å‡½æ•°ä¸­bindç»‘å®šå¹¶ä¼ å‚
1. **å½“ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨ bind æ”¹å˜äº†thisæŒ‡å‘åï¼Œbind å‡½æ•°è°ƒç”¨çš„ç»“æœè¿”å›å€¼ï¼Œå°±æ˜¯è¢«æ”¹å˜thisæŒ‡å‘åçš„å‡½æ•°çš„å¼•ç”¨ï¼›**
2. å®ç°æ™®é€šå‡½æ•°changeMsg2
    
    ```
    changeMsg2(arg1, arg2) {
        // console.log(this);
        this.setState({
          msg: 'ç»‘å®šthiså¹¶ä¼ å‚çš„æ–¹å¼2' + arg1 + arg2
        })
      }
    ```
3. renderä¸­ç‚¹å‡»ç¬¬äºŒä¸ªæŒ‰é’®
    
    ```
    <input type="button" value="ç»‘å®šthiså¹¶ä¼ å‚çš„æ–¹å¼2" onClick={this.changeMsg2} />
    ```
4. constructorç»‘å®šthiså¹¶ä¼ å‚
    
    ```
    constructor(props) {
        super(props)
        this.state = {
          msg: 'è¿™æ˜¯é»˜è®¤çš„msg'
        }
        
        // ç»‘å®š this å¹¶ä¼ å‚çš„æ–¹å¼2: åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šå¹¶ä¼ å‚
        // æ³¨æ„ï¼Œå½“ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨ bind æ”¹å˜äº†thisæŒ‡å‘åï¼Œbind å‡½æ•°è°ƒç”¨çš„ç»“æœè¿”å›å€¼ï¼Œå°±æ˜¯è¢«æ”¹å˜thisæŒ‡å‘åçš„å‡½æ•°çš„å¼•ç”¨ï¼›
        // æ³¨æ„ï¼š bind ä¸ä¼šä¿®æ”¹ åŸå‡½æ•°çš„ this æŒ‡å‘
        this.changeMsg2 = this.changeMsg2.bind(this, 'ğŸš—', 'ğŸ‘«')
    }
    ```

### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®šthiså¹¶ä¼ å‚
1. å®ç°ç®­å¤´å‡½æ•°changeMsg3
    
    ```
    changeMsg3 = (event,arg1, arg2) => {
        // console.log(this);
        this.setState({
          msg: 'ç»‘å®šthiså¹¶ä¼ å‚çš„æ–¹å¼3' + arg1 + arg2
        })
    }
    ```
2. renderä¸­ç‚¹å‡»ç¬¬ä¸‰ä¸ªæŒ‰é’®

    ```
    <input type="button" value="ç»‘å®šthiså¹¶ä¼ å‚çš„æ–¹å¼3" onClick={(event) => { this.changeMsg3(event,'ğŸ˜Š', 'ğŸ˜˜') }} />
    ```

## ç»‘å®šæ–‡æœ¬æ¡†ä¸stateä¸­çš„å€¼
1. æ•ˆæœï¼Ÿä¸€ä¸ªæ–‡æœ¬æ¡†è¾“å…¥ä¹‹åï¼Œå°†è¾“å…¥å†…å®¹ä¼ é€’ç»™stateå¹¶é¡µé¢å³æ—¶æ›´æ–°
2. åˆ›å»ºrenderä¸­æ·»åŠ input
    
    ```
    {/* åœ¨ Vue ä¸­ï¼Œæœ‰ v-model æŒ‡ä»¤æ¥å®ç°åŒå‘æ•°æ®ç»‘å®šï¼Œä½†æ˜¯ï¼Œåœ¨ React ä¸­ï¼Œ æ ¹æœ¬æ²¡æœ‰æŒ‡ä»¤çš„æ¦‚å¿µï¼Œå› æ­¤React é»˜è®¤ä¹Ÿä¸æ”¯æŒ åŒå‘æ•°æ®ç»‘å®š */}
    {/* React åªæ”¯æŒï¼ŒæŠŠæ•°æ®ä» state ä¸Šä¼ è¾“åˆ° é¡µé¢ï¼Œä½†æ˜¯ï¼Œæ— æ³•è‡ªåŠ¨å®ç°æ•°æ®ä» é¡µé¢ ä¼ è¾“åˆ° state ä¸­ è¿›è¡Œä¿å­˜ï¼Œä¹Ÿå°±æ˜¯ï¼ŒReact ä¸æ”¯æŒæ•°æ®çš„è‡ªåŠ¨é€†å‘ä¼ è¾“ï¼Œ åªæ˜¯å®ç°äº†æ•°æ®çš„å•å‘ç»‘å®š */}
    {/* æ³¨æ„ï¼šå¦‚æœä¸º è¡¨å•å…ƒç´ ï¼Œæä¾›äº† value å±æ€§ç»‘å®šï¼Œé‚£ä¹ˆï¼Œå¿…é¡»åŒæ—¶ä¸º è¡¨å•å…ƒç´  ç»‘å®š readOnly, æˆ–è€…æä¾›è¦ç»™ onChange äº‹ä»¶ */}
    {/* å¦‚æœæä¾›äº†readOnlyï¼Œè¡¨ç¤ºè¿™ä¸ªå…ƒç´ åªè¯»çš„ä¸èƒ½è¢«ä¿®æ”¹  */}
    {/* å¦‚æœæä¾›äº†onChange è¡¨ç¤ºï¼Œè¿™ä¸ªå…ƒç´ çš„å€¼å¯ä»¥è¢«ä¿®æ”¹ï¼Œä½†æ˜¯ï¼Œè¦è‡ªå·±å®šä¹‰ä¿®æ”¹çš„é€»è¾‘  */}
    <input type="text" style={{ width: '100%' }} value={this.state.msg} onChange={this.txtChanged} ref="txt" />
    ```
3. å®ç°this.txtChanged
    
    ```
    // ä¸º æ–‡æœ¬æ¡† ç»‘å®š txtChanged äº‹ä»¶
    txtChanged = (e) => {
        // console.log('ok');
        // å¦‚æœæƒ³è®© æ–‡æœ¬æ¡†åœ¨è§¦å‘ onChange çš„æ—¶å€™ï¼ŒåŒæ—¶æŠŠæ–‡æœ¬æ¡†æœ€æ–°çš„å€¼ï¼Œä¿å­˜åˆ° state ä¸­ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è°ƒç”¨ this.setState
        // è·å–æ–‡æœ¬æ¡†ä¸­ æœ€æ–°æ–‡æœ¬çš„3ç§æ–¹å¼ï¼š
        //  1. ä½¿ç”¨ document.getElementById æ¥æ‹¿
        //  2. ä½¿ç”¨ ref æ¥æ‹¿
        // console.log(this.refs.txt.value);
        //  3. ä½¿ç”¨ äº‹ä»¶å¯¹è±¡çš„ å‚æ•° e æ¥æ‹¿   e.target å°±è¡¨ç¤ºè§¦å‘ è¿™ä¸ªäº‹ä»¶çš„ äº‹ä»¶æºå¯¹è±¡ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªåŸç”Ÿçš„JS DOM å¯¹è±¡
        // console.log(e.target.value);
        this.setState({
            msg: e.target.value
        })
    }
    ```
    
## è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹
![pic](https://gitee.com/zhonghua123/blogimgs/raw/master/img/webzh_60.png/)
    
1. åˆ›å»ºè¯„è®ºåˆ—è¡¨ç»„ä»¶CmtList.jsx
    
    ```
    import React from 'react'
    import CMTItem from './CmtItem.jsx'
    import CMTBox from './CmtBox.jsx'
    
    // è¯„è®ºåˆ—è¡¨ç»„ä»¶
    export default class CMTList extends React.Component {
      constructor(props) {
        super(props)
        this.state = {
          list: [
            { user: 'zs', content: '123' },
            { user: 'ls', content: 'qqq' },
            { user: 'xiaohong', content: 'www' }
          ]
        }
      }
    
      // åœ¨ç»„ä»¶å°šæœªæ¸²æŸ“çš„æ—¶å€™ï¼Œå°±ç«‹å³ è·å–æ•°æ®
      componentWillMount() {
        this.loadCmts()
      }
    
      render() {
        return <div>
          <h1>è¿™æ˜¯è¯„è®ºåˆ—è¡¨ç»„ä»¶</h1>
    
          {/* å‘è¡¨è¯„è®ºçš„ç»„ä»¶ */}
          {/* react ä¸­ï¼Œåªè¦æ˜¯ä¼ é€’ç»™ å­ç»„ä»¶çš„æ•°æ®ï¼Œä¸ç®¡æ˜¯ æ™®é€šçš„ç±»å‹ï¼Œè¿˜æ˜¯æ–¹æ³•ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ this.props æ¥è°ƒç”¨ */}
          <CMTBox reload={this.loadCmts}></CMTBox>
    
          <hr />
    
    
          {/* å¾ªç¯æ¸²æŸ“ä¸€äº›è¯„è®ºå†…å®¹ç»„ä»¶ */}
          {this.state.list.map((item, i) => {
            return <CMTItem key={i} {...item}></CMTItem>
          })}
        </div>
      }
    
      // ä»æœ¬åœ°å­˜å‚¨ä¸­åŠ è½½ è¯„è®ºåˆ—è¡¨
      loadCmts = () => {
        var list = JSON.parse(localStorage.getItem('cmts') || '[]')
        this.setState({
          list
        })
      }
    }
    ```
2. åˆ›å»ºè¯„è®ºitemç»„ä»¶CmtItem.jsx
    
    ```
    import React from 'react'
    // è¯„è®ºåˆ—è¡¨é¡¹ç»„ä»¶
    export default class CMTItem extends React.Component {
    
      render() {
        return <div style={{ border: '1px solid #ccc', margin: '10px 0' }}>
          <h3>è¯„è®ºäººï¼š{this.props.user}</h3>
          <h5>è¯„è®ºå†…å®¹ï¼š{this.props.content}</h5>
        </div>
      }
    }
    ```
3. åˆ›å»ºè¯„è®ºç»„ä»¶CmtBox.jsx
    
    ```
    import React from 'react'

    // è¯„è®ºåˆ—è¡¨æ¡†ç»„ä»¶
    export default class CMTBox extends React.Component {
    
      render() {
        return <div>
          <label>è¯„è®ºäººï¼š</label><br />
          <input type="text" ref="user" /><br />
          <label>è¯„è®ºå†…å®¹ï¼š</label><br />
          <textarea cols="30" rows="4" ref="content"></textarea><br />
    
          <input type="button" value="å‘è¡¨è¯„è®º" onClick={this.postComment} />
        </div>
      }
    
      postComment = () => {
        // 1. è·å–åˆ°è¯„è®ºäººå’Œè¯„è®ºå†…å®¹
        // 2. ä» æœ¬åœ°å­˜å‚¨ä¸­ï¼Œå…ˆè·å–ä¹‹å‰çš„è¯„è®ºæ•°ç»„
        // 3. æŠŠ æœ€æ–°çš„è¿™æ¡è¯„è®ºï¼Œunshift è¿›å»
        // 4. åœ¨æŠŠæœ€æ–°çš„è¯„è®ºæ•°ç»„ï¼Œä¿å­˜åˆ° æœ¬åœ°å­˜å‚¨ä¸­
        var cmtInfo = { user: this.refs.user.value, content: this.refs.content.value }
        var list = JSON.parse(localStorage.getItem('cmts') || '[]')
        list.unshift(cmtInfo)
        localStorage.setItem('cmts', JSON.stringify(list))
    
        this.refs.user.value = this.refs.content.value = ''
    
        this.props.reload()
      }
    }
    ```
4. main.jsä¸­å¼•ç”¨
    
    ```
    import React from 'react'
    import ReactDOM from 'react-dom'
    import CmtList from './components/Comment/CmtList.jsx'
    // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM
    ReactDOM.render(<div>
      <BindThis></BindThis>
    </div>, document.getElementById('app'))
    ```
        
## contextç‰¹æ€§
1. å¦‚æœä¸€ä¸ªç»„ä»¶1åµŒå¥—ç»„ä»¶2åµŒå¥—ç»„ä»¶3ï¼Œç»„ä»¶1ä¸ºçˆ¶ç»„ä»¶ï¼Œ2ä¸ºå­ç»„ä»¶ï¼Œ3ä¸ºå­™ç»„ä»¶ã€‚
2. å¦‚æœç»„ä»¶1è¦ç»™ç»„ä»¶3ä¼ é€’æ•°æ®ï¼Œé€šå¸¸çš„æ–¹æ³•æ˜¯é€šè¿‡propså±æ€§å±‚å±‚ä¼ é€’
    
    ```
    export default class Com1 extends React.Component {
      constructor(props) {
            super(props)
            this.state = {
              color: 'red'
            }
      }
      render() {
        return <div>
          <h1>è¿™æ˜¯ çˆ¶ç»„ä»¶ </h1>
          <Com2 color={this.state.color}></Com2>
        </div>
      }
    }
    // ä¸­é—´çš„å­ç»„ä»¶
    class Com2 extends React.Component {
      render() {
        return <div>
          <h3>è¿™æ˜¯ å­ç»„ä»¶ </h3>
          <Com3 color={this.props.color}></Com3>
        </div>
      }
    }
    
    // å†…éƒ¨çš„å­™å­ç»„ä»¶
    class Com3 extends React.Component {
      render() {
        return <div>
          <h5 style={{ color: this.props.color }}>è¿™æ˜¯ å­™å­ç»„ä»¶ </h5>
        </div>
      }
    } 
    ```
3. é€šè¿‡contextç›´æ¥ä¼ é€’
    
    ```
    // æœ€å¤–å±‚çš„çˆ¶ç»„ä»¶
    export default class Com1 extends React.Component {
      constructor(props) {
        super(props)
        this.state = {
          color: 'red'
        }
      }
    
      //   getChildContextTypes
      // 1. åœ¨ çˆ¶ç»„ä»¶ä¸­ï¼Œå®šä¹‰ä¸€ä¸ª functionï¼Œè¿™ä¸ªfunction æœ‰ä¸ªå›ºå®šçš„åç§°ï¼Œå«åš getChildContext ï¼Œå†…éƒ¨ï¼Œå¿…é¡» è¿”å›ä¸€ä¸ª å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯è¦å…±äº«ç»™ æ‰€æœ‰å­å­™è‡ªå»ºçš„  æ•°æ®
      getChildContext() {
        return {
          color: this.state.color
        }
      }
    
      // 2. ä½¿ç”¨ å±æ€§æ ¡éªŒï¼Œè§„å®šä¸€ä¸‹ä¼ é€’ç»™å­ç»„ä»¶çš„ æ•°æ®ç±»å‹ï¼Œ éœ€è¦å®šä¹‰ ä¸€ä¸ª é™æ€çš„ï¼ˆstaticï¼‰ childContextTypesï¼ˆå›ºå®šåç§°ï¼Œä¸è¦æ”¹ï¼‰
      static childContextTypes = {
        color: ReactTypes.string // è§„å®šäº† ä¼ é€’ç»™å­ç»„ä»¶çš„ æ•°æ®ç±»å‹
      }
      render() {
        return <div>
          <h1>è¿™æ˜¯ çˆ¶ç»„ä»¶ </h1>
          <Com2></Com2>
        </div>
      }
    }
    // ä¸­é—´çš„å­ç»„ä»¶
    class Com2 extends React.Component {
      render() {
        return <div>
          <h3>è¿™æ˜¯ å­ç»„ä»¶ </h3>
          <Com3></Com3>
        </div>
      }
    }

    // å†…éƒ¨çš„å­™å­ç»„ä»¶
    class Com3 extends React.Component {
    
      // 3. ä¸Šæ¥ä¹‹åï¼Œå…ˆæ¥ä¸ªå±æ€§æ ¡éªŒï¼Œå»æ ¡éªŒä¸€ä¸‹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ å‚æ•°ç±»å‹
      static contextTypes = {
        color: ReactTypes.string // è¿™é‡Œï¼Œå¦‚æœå­ç»„ä»¶ï¼Œæƒ³è¦ä½¿ç”¨ çˆ¶ç»„ä»¶é€šè¿‡ context å…±äº«çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆ åšä¸€ä¸‹æ•°æ®ç±»å‹æ ¡éªŒ
      }
    
      render() {
        return <div>
          <h5 style={{ color: this.context.color }}>è¿™æ˜¯ å­™å­ç»„ä»¶  ---  {this.context.color} </h5>
        </div>
      }
    }
    ```

## Reactè¿‡æ¸¡åŠ¨ç”»å®ç°
1. åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ç»™ä¸€ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå’Œæ¶ˆå¤±æ·»åŠ æŸç§è¿‡æ¸¡åŠ¨ç”»ï¼Œå¯ä»¥å¾ˆå¥½çš„å¢åŠ ç”¨æˆ·ä½“éªŒã€‚
2. å½“ç„¶ï¼Œå¯ä»¥é€šè¿‡åŸç”Ÿçš„CSSæ¥å®ç°è¿™äº›è¿‡æ¸¡åŠ¨ç”»ï¼Œä½†æ˜¯Reactç¤¾åŒºä¸ºæˆ‘ä»¬æä¾›äº†react-transition-groupç”¨æ¥å®Œæˆè¿‡æ¸¡åŠ¨ç”»ã€‚
3. è¿™ä¸ªåº“å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿çš„å®ç°ç»„ä»¶çš„ å…¥åœº å’Œ ç¦»åœº åŠ¨ç”»ï¼Œä½¿ç”¨æ—¶éœ€è¦è¿›è¡Œé¢å¤–çš„å®‰è£…ï¼š
    
    ```
    //npmå®‰è£…
    npm install react-transition-group --save
    //yarnå®‰è£…
    yarn add react-transition-group
    ```

### react-transition-groupä¸»è¦ç»„ä»¶
1. Transition:è¯¥ç»„ä»¶æ˜¯ä¸€ä¸ªå’Œå¹³å°æ— å…³çš„ç»„ä»¶ï¼ˆä¸ä¸€å®šè¦ç»“åˆCSS)
2. CSSTransition: åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œé€šå¸¸ä½¿ç”¨CSSTransitionæ¥å®Œæˆè¿‡æ¸¡åŠ¨ç”»æ•ˆæœ
3. SwitchTransition: ä¸¤ä¸ªç»„ä»¶æ˜¾ç¤ºå’Œéšè—åˆ‡æ¢æ—¶ï¼Œä½¿ç”¨è¯¥ç»„ä»¶
4. TransitionGroup: å°†å¤šä¸ªåŠ¨ç”»ç»„ä»¶åŒ…è£¹åœ¨å…¶ä¸­ï¼Œä¸€èˆ¬ç”¨äºåˆ—è¡¨ä¸­å…ƒç´ çš„åŠ¨ç”»

####  CSSTransitio
1. CSSTransitionæ˜¯åŸºäºTransitionç»„ä»¶æ„å»º
2. CSSTransitionæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šappearã€enterã€exitï¼›
3. å®ƒä»¬æœ‰ä¸‰ç§çŠ¶æ€ï¼Œéœ€è¦å®šä¹‰å¯¹åº”çš„CSSæ ·å¼
    1. ç¬¬ä¸€ç±»ï¼Œå¼€å§‹çŠ¶æ€ï¼šå¯¹äºçš„ç±»æ˜¯-appearã€-enterã€exitï¼›
    2. ç¬¬äºŒç±»ï¼šæ‰§è¡ŒåŠ¨ç”»ï¼šå¯¹åº”çš„ç±»æ˜¯-appear-activeã€-enter-activeã€-exit-activeï¼›
    3. ç¬¬ä¸‰ç±»ï¼šæ‰§è¡Œç»“æŸï¼šå¯¹åº”çš„ç±»æ˜¯-appear-doneã€-enter-doneã€-exit-doneï¼›
4. CSSTransitionå¸¸è§å¯¹åº”çš„å±æ€§ï¼š
    1. inï¼šè§¦å‘è¿›å…¥æˆ–è€…é€€å‡ºçŠ¶æ€
        1. å¦‚æœæ·»åŠ äº†unmountOnExit={true}ï¼Œé‚£ä¹ˆè¯¥ç»„ä»¶ä¼šåœ¨æ‰§è¡Œé€€å‡ºåŠ¨ç”»ç»“æŸåè¢«ç§»é™¤æ‰ï¼›
        2. å½“inä¸ºtrueæ—¶ï¼Œè§¦å‘è¿›å…¥çŠ¶æ€ï¼Œä¼šæ·»åŠ -enterã€-enter-acitveçš„classå¼€å§‹æ‰§è¡ŒåŠ¨ç”»ï¼Œå½“åŠ¨ç”»æ‰§è¡Œç»“æŸåï¼Œä¼šç§»é™¤ä¸¤ä¸ªclassï¼Œå¹¶ä¸”æ·»åŠ -enter-doneçš„classï¼›
        3. å½“inä¸ºfalseæ—¶ï¼Œè§¦å‘é€€å‡ºçŠ¶æ€ï¼Œä¼šæ·»åŠ -exitã€-exit-activeçš„classå¼€å§‹æ‰§è¡ŒåŠ¨ç”»ï¼Œå½“åŠ¨ç”»æ‰§è¡Œç»“æŸåï¼Œä¼šç§»é™¤ä¸¤ä¸ªclassï¼Œå¹¶ä¸”æ·»åŠ -enter-doneçš„classï¼›
    2. classNamesï¼šåŠ¨ç”»classçš„åç§°
        1. å†³å®šäº†åœ¨ç¼–å†™cssæ—¶ï¼Œå¯¹åº”çš„classåç§°ï¼šæ¯”å¦‚card-enterã€card-enter-activeã€card-enter-doneï¼›
    3. timeoutï¼šè¿‡æ¸¡åŠ¨ç”»çš„æ—¶é—´
    4. appearï¼šæ˜¯å¦åœ¨åˆæ¬¡è¿›å…¥æ·»åŠ åŠ¨ç”»ï¼ˆéœ€è¦å’ŒinåŒæ—¶ä¸ºtrueï¼‰
    5. unmountOnExitï¼šé€€å‡ºåå¸è½½ç»„ä»¶
5. CSSTransitionå¯¹åº”çš„é’©å­å‡½æ•°ï¼šä¸»è¦ä¸ºäº†æ£€æµ‹åŠ¨ç”»çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ¥å®Œæˆä¸€äº›JavaScriptçš„æ“ä½œ
    1. onEnterï¼šåœ¨è¿›å…¥åŠ¨ç”»ä¹‹å‰è¢«è§¦å‘ï¼›
    2. onEnteringï¼šåœ¨åº”ç”¨è¿›å…¥åŠ¨ç”»æ—¶è¢«è§¦å‘ï¼›
    3. onEnteredï¼šåœ¨åº”ç”¨è¿›å…¥åŠ¨ç”»ç»“æŸåè¢«è§¦å‘

```
import React, { createRef, PureComponent } from 'react'
import { CSSTransition } from "react-transition-group"
import "./style.css"

export class App extends PureComponent {
  constructor(props) {
    super(props)

    this.state = {
      isShow: true
    }

    this.sectionRef = createRef()
  }

  render() {
    const { isShow } = this.state

    return (
      <div>
        <button onClick={e => this.setState({isShow: !isShow})}>åˆ‡æ¢</button>
        {/* å®ç°è¿‡åº¦åŠ¨ç”»*/}

        <CSSTransition 
          nodeRef={this.sectionRef}
          in={isShow} 
          unmountOnExit={true} 
          classNames="why" 
          timeout={2000}
          appear
          onEnter={e => console.log("å¼€å§‹è¿›å…¥åŠ¨ç”»")}
          onEntering={e => console.log("æ‰§è¡Œè¿›å…¥åŠ¨ç”»")}
          onEntered={e => console.log("æ‰§è¡Œè¿›å…¥ç»“æŸ")}
          onExit={e => console.log("å¼€å§‹ç¦»å¼€åŠ¨ç”»")}
          onExiting={e => console.log("æ‰§è¡Œç¦»å¼€åŠ¨ç”»")}
          onExited={e => console.log("æ‰§è¡Œç¦»å¼€ç»“æŸ")}
        >
          <div className='section' ref={this.sectionRef}>
            <h2>å“ˆå“ˆå“ˆ</h2>
            <p>æˆ‘æ˜¯å†…å®¹, å“ˆå“ˆå“ˆ</p>
          </div>
        </CSSTransition>
      </div>
    )
  }
}

export default App
```
