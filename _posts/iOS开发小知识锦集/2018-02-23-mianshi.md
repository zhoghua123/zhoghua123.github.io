---
layout: post
title: iOS开发小知识锦集之面试题收集
category: iOS小知识
tags: iOS小知识
description: iOS小知识
---

## 基础篇


## Runloop篇
1. 什么是RunLoop?
    1. 从字面意思看:运行循环/跑圈
    2. 其实它内部就是do-while循环,在这个循环内部不断地处理各种任务(比如:source/Timer/Observer)
    3. 一个线程对应一个runloop,主线程的runloop默认已经启动,子线程的runloop需要自己手动启动(调用run方法)
    4. RunLoop只能选择一个Mode启动,如果当Mode中没有任何source(source0/source1),Timer,那么就直接退出RunLoop
2. 自动释放池什么时候释放?
    1. 通过Observer监听RunLoop的状态,一旦监听到RunLoop即将进入休眠等待状态,就释放自动释放池(`KCFRunLoopBeforeWaiting`)
3. 在开发中如何使用RunLoop?什么应用场景?
    1. 开启一个常驻线程(让一个子线程不进入消亡状态,等待其他的线程发来消息,处理其他事件) 
    2. 在子线程中开启一个定时器 在子线程中进行一些长期监控
    3. 可以控制定时器在特定模式下运行
    4. 可以让某些事件(行为/任务)在特定模式下执行
    5. 可以添加Observer监听runloop的状态,比如监听点击事件的处理(在所有点击事件之前做一些事情)     
4. NSTimer定时器
    1. 定时器默认情况下是添加在RunLoop的默认(Default)模式下的,因此当滚动界面时,定时器会停止,滚动停止定时器重新工作
    2. 解决办法:
        1. 使用将定时器添加到占位(CommonMode)模式中
        2. 使用GCD定时,GCD的定时器不受runLoop的Mode影响(滚动界面时,定时器不受影响)GCD定时器实现不一样,GCD比NSTimer准确
    3. 可以添加NSTimer到指定的Mode中,比如:滚动开始就有作用
    4. NSTimer会保留目标对象,如果定时器重复定时(反复执行任务),容易引入保留环,一次性的定时器执行完会自动失效调用invalidate
    
## Runtime篇

