## socket层上的协议
1. socket层上的协议就是应用层上的传输协议
2. Socket层上的协议指的数据传输的格式
3. HTTP协议
    1. 传输格式：假设(这是假设)，实际http的格式不是这样的
    2. `http1.1,content-type:multipart/form-data,content-length:188,body:username=zhangsan&password=12345`
4. XMPP协议，是一款即时通讯协议
    1. 可扩展消息处理现场协议是基于可扩展标记语言（XML）的协议，它用于即时消息（IM）以及在线现场探测。这个协议可能最终允许因特网用户向因特网上的其他任何人发送即时消息
    2. 传输格式：
    
        ```
        <from>zhangsan<from>
        <to>lisi<to>
        <body>一起吃晚上</body>
        ```
5. 即时通信为何使用XMPP协议,而不使用http协议?
    1. 即时通信数据交互特别频繁.尽量做到传输的数据最小.
    2. http有非常多的请求头,这些请求头没有用,浪费流量

## TCP/UDP/HTTP/XMPP的关系
1. 协议:定义规则
2. TCP/UDP:数据的传输方式
3. HTTP/XMPP:数据的传输内容格式
4. 例子:写信
    1. 寄信的方式:EMS,顺风,韵达等.(TCP/UDP)
    2. 内容格式:英文，日语等(http/XMPP)

## socket的长连接与短连接
1. iOS的远程推送是一个长连接
2. http是一个短连接
3. 如下图举例:
     ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/socket7.png)
4. 情况
    1. 微信客户端在开启状态下时,微信服务器发送消息给客户端直接通过TCP/IP通道
    2. 微信客户端在关闭状态下时,微信服务器就不能直接给微信客户端发送消息了,就需要将消息推送给苹果的APNS服务器,由APNS推送给微信客户端,因为苹果的APNS服务器一直个微信APP保持连接着.

