---
layout: post
title: Runtime系列8之-Runtime的应用(二)
category: iOS开发
tags: Runtime
description: Runtime
--- 

## RunTime获取成员变量/属性/方法/协议列表

代码如下:

```javascript
 unsigned int count = 0;
 //获取属性列表
+ (void)getProperties
{
    unsigned int count = 0;
    // 拷贝出所有的成员变量属性列表
    objc_property_t *properties = class_copyPropertyList([UITextField class], &count);
    for (int i = 0; i<count; i++) {
        // 取出属性
        objc_property_t property = properties[i];
        // 打印属性名字
        NSLog(@"%s   <---->   %s", property_getName(property), property_getAttributes(property));
    }
    free(properties);
}
//获取方法列表
+ (void)getMethods
{
    unsigned int count = 0;
    // 拷贝出所有的方法列表
    Method *methods = class_copyMethodList([UITextField class], &count);
    for (int i = 0; i<count; i++) {
        // 取出成员变量
        Method method = methods[i];
        // 打印该类的方法
        NSLog(@"%@ %p",  NSStringFromSelector(method_getName(method)), method_getImplementation(method));
       
    }
    // 释放
    free(methods);
}
//获取成员变量列表
+ (void)getIvars
{
    unsigned int count = 0;
    // 拷贝出所有的成员变量列表
    Ivar *ivars = class_copyIvarList([UITextField class], &count);
    for (int i = 0; i<count; i++) {
        // 取出成员变量
        //        Ivar ivar = *(ivars + i);
        Ivar ivar = ivars[i];
        // 打印成员变量名字
        NSLog(@"%s %s", ivar_getName(ivar), ivar_getTypeEncoding(ivar));
    }
    // 释放
    free(ivars);
}
//获取协议列表
+ (void)getProtocols
{
    //获取协议列表
    __unsafe_unretained Protocol **protocolList = class_copyProtocolList([UITextField class], &count);
    for (unsigned int i = 0; i<count; i++) {
        Protocol *myProtocal = protocolList[i];
        const char *protocolName = protocol_getName(myProtocal);
        NSLog(@"protocol---->%@", [NSString stringWithUTF8String:protocolName]);
       
        /*
         //oc字符串与C语言字符串之间的转换
         NSString---->char *
         [@"dfafds" UTF8String];
         char *---->NSString
         [NSString stringWithUTF8String:protocolName]
         */
    }
}
```

