---
layout: post
title: MFC-第四节 案例：销售系统
category: CPP基础
tags: CPP基础
description: CPP基础
---

### 新建项目

#### 1. 根据向导创建项目
1. 新建MFC项目，项目名称(SaleSystem)、设置路径
2. 应用程序类型：
    1. 应用程序类型：单个文档
    2. 项目样式（里面有4种样式）：选择MFC standard（MFC 标准）
    3. 下一步，直到“用户界面功能”
3. 用户界面功能
    1. command bar（menu/toolbar/ribbon）(命令栏(菜单/工具栏/功能区)):选择使用经典菜单
    2. classic menu options：选择 无，即去掉工具栏
4. 点击完成，即可

#### 2. 添加预处理指令
1. 由于微软在VS2013中不建议再使用C/C++的传统库函数scanf,strcpy,sprintf等，所以直接使用这些库函数会提示C4996错误。
2. VS建议采用带_s的函数，如scanf_s、strcpy_s，但这些并不是标准C/C++函数。要想继续使用此函数，需要添加 `_CRT_SECURE_NO_WARNINGS`这个预定义。
3. 在项目 -> 属性 -> C/C++->预处理器 -> 预处理器定中添加 _CRT_SECURE_NO_WARNINGS：,或者在使用这些函数的.cpp文件中导入这个宏` #define _CRT_SECURE_NO_WARNINGS`

#### 3. 设置窗口属性
1. 设置图标
    1. 将准备好的icon图片复制到项目根目录res文件夹中
    2. 打开资源视图，右击Icon->添加资源->Icon->导入->打开res->选择导入的图片->打开即可
    3. 添加的2张图片，默认ID为IDI_ICON1、IDI_ICON2，右击IDI_ICON1->属性，修改ID分别为:IDI_ICON_WIN（头像）/IDI_ICON_RE
    4. 在CMainFrame的 OnCreate()中添加如下代码：
        
        ```
        //设置图标，IDI_ICON_WIN为图标资源ID，此为WINAPI函数
        SetClassLong(m_hWnd, GCL_HICON, (LONG)AfxGetApp()->LoadIconW(IDI_ICON_WIN));
        ```
2. 设置窗口大小和居中显示
    1. 还是在CMainFrame的OnCreate()中接着写代码：
        
        ```
        //设置项目图标，IDI_ICON_WIN为图标资源ID，此为WINAPI函数
        	SetClassLong(m_hWnd, GCL_HICON, (LONG)AfxGetApp()->LoadIconW(IDI_ICON_WIN));
        	//设置窗口的位置和大小：CWnd::MoveWindow
        	//0, 0, 起点坐标x和y
        	//800, 500, 窗口宽度和高度
        	MoveWindow(0, 0, 800, 500);
        
        	//将窗口移动到屏幕中央，CWnd::CenterWindow
        	CenterWindow();
        ```
3. 设置窗口标题
    1. 在CSaleSystemDoc文档类中的OnNewDocument()函数中添加如下代码：
    
        ```
        //设置窗口标题，CDocument::SetTitle
        SetTitle(TEXT("销售管理系统"));
        ```
    2. 注意:标题样式:标题左内容-标题右内容
        1. 如果是在CMainFrame的OnCreate()中设置,那么设置的就是"标题右内容",运行结果为: 无标题-销售管理系统
        2. 如果在CSaleSystemDoc文档类中的OnNewDocument()函数中设置,那么设置的事"标题左内容",运行结果为:销售管理系统- SaleSystem
            
            ![图4](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/cpp71.png)


