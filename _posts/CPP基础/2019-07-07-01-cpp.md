---
layout: post
title: 第十四章 STL算法第二节 
category: CPP基础
tags: CPP基础
description: CPP基础
---  

## 常用的算法
1. 常用的查找算法：
    
    ```
    adjacent_find()（ adjacent 是邻近的意思）,binary_search(),count(),count_if(),equal_range(),find(),find_if()。
    ```
2. 常用的排序算法：
    
    ```
    merge(),sort(),random_shuffle()（shuffle是洗牌的意思） ,reverse()
    ```
3. 常用的拷贝和替换算法：
    
    ```
    copy(), replace(),replace_if(),swap()
    ```
4. 常用的算术和生成算法：
    
    ```
    accumulate()（ accumulate 是求和的意思）,fill()
    ```
5. 常用的集合算法：
    
    ```
    set_union(),set_intersection(),set_difference()。
    ```
6. 常用的遍历算法：
    
    ```
    for_each(), transform()（ transform 是变换的意思）
    ```

### 常用的遍历算法 
1. **for_each()**
    1. 作用：用指定函数依次对指定范围内所有元素进行迭代访问。该函数不得修改序列中的元素。
    2. 函数定义。For_each(begin, end, func);
        
        ```
        template<class _InIt,class _Fn> 
        	inline _Fn for_each(_InIt _First, _InIt _Last, _Fn _Func)
        	{	// perform function for each element [_First, _Last)
        	_Adl_verify_range(_First, _Last);
        	auto _UFirst = _Get_unwrapped(_First);
        	const auto _ULast = _Get_unwrapped(_Last);
        	for (; _UFirst != _ULast; ++_UFirst)
        		{
        		_Func(*_UFirst);
        		}
        
        	return (_Func);
        	}
        ```
        
        1. 有3个参数
        2. _Func：可以是函数地址，或者函数对象
            1. 函数对象可以记录当前的调用状态，这是函数对象特有的功能
        3. 返回值是_Func，即返回值是传入的函数地址或者函数对象
    3. 代码举例：
        
        ```
        void printVection(vector<int>&vx) {
            	for (vector<int>::iterator it=vx.begin(); it != vx.end(); it++) {
            		cout << *it << " ";
            	}
        }
        
        void showv1test(const int &n) {
        	   cout << n << endl;
        }
        
        class ShowVector {
        public:
        	ShowVector() {
        		//初始化成员变量
        		callcount = 0;
        	}
        	void operator()(const int &x) {
        		cout << x << " ";
        		callcount++;
        	}
        	void printCallCount() {
        		cout <<"调用次数---"<< callcount << endl;
        	}
        private:
            	//记录当前函数对象，调用的次数
            	int callcount;
        };
        void tests1() {
            	vector<int> v1;
            	v1.push_back(1);
            	v1.push_back(3);
            	v1.push_back(5);
            	//for循环
            	//printVection(v1);
            	//第三个参数传函数地址
            	//for_each(v1.begin(), v1.end(), showv1test);
            	//第三个函数传函数匿名对象
            	//for_each(v1.begin(), v1.end(), ShowVector());
            
            	ShowVector shovx;
            	//这么调用打印次数为0,为什么呢？ 
            	//for_each(v1.begin(), v1.end(), shovx);
            	//这么调用才会打印实际的值3
            	shovx = for_each(v1.begin(), v1.end(), shovx);
            	shovx.printCallCount();
        }
        ```
        
        1. 疑问：下面有什么不同呢？
            
            ```
            //这么调用打印次数为0,为什么呢？ 
            //for_each(v1.begin(), v1.end(), shovx);
            //这么调用才会打印实际的值
            shovx = for_each(v1.begin(), v1.end(), shovx);
            ```
        2. 因为for_each函数参数传入shovx函数对象时，函数内部并非直接用的是外部的对象shovx，而是通过shovx拷贝一个新的函数对象，在函数内部使用
        3. 因此，外部的shovx对象仍然没有变化，真正变化的是内部拷贝的那个函数对象，而此时，内部拷贝的对象有作为函数返回值，返回出来了
        4. 所以要想拿到真正的调用结果，必须接收函数调用结果，才能获取到真正调用的值
        5. 总结：**实参初始化形参本质会调用形参对应类的拷贝构造函数，初始化一个形参变量**
        


