---
layout: post
title: 第十四章 STL第一节
category: CPP基础
tags: CPP基础
description: CPP基础
---   

## STL(标准模板库)理论基础

###  基本概念
1. STL（Standard Template Library，标准模板库)是惠普实验室开发的一系列**软件**的统称。现然主要出现在C++中，但在被引入C++之前该技术就已经存在了很长的一段时间。
2. STL的从广义上讲分为三类：algorithm（算法）、container（容器）和iterator（迭代器），容器和算法通过迭代器可以进行无缝地连接。
3. 几乎所有的代码都采 用了模板类和模板函数的方式，这相比于传统的由函数和类组成的库来说提供了更好的代码重用机会。
4. 在C++标准中，STL被组织为下面的13个头文 件：<algorithm>、<deque>、<functional>、<iterator>、<vector>、<list>、<map>、<memory>、<numeric>、<queue>、<set>、<stack> 和<utility>。
    
    ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/cpp28.png)
5. STL详细的说六大组件
    1. 容器（Container）
    2. 算法（Algorithm）
    3. 迭代器（Iterator）
    4. 仿函数（Function object）
    5. 适配器（Adaptor）
    6. 空间配制器（allocator）
6. 使用STL的好处 
    1. STL是C++的一部分，因此不用额外安装什么，它被内嵌在你的编译器之内
    2. STL的一个重要特点是数据结构和算法的分离。尽管这是个简单的概念，但是这种分离确实使得STL变得非常通用。
    3. 程序员可以不用思考STL具体的实现过程，只要能够熟练使用STL就OK了。这样他们就可以把精力放在程序开发的别的方面。
    4. STL具有高可重用性，高性能，高移植性，跨平台的优点。
        1. 高可重用性：STL中几乎所有的代码都采用了模板类和模版函数的方式实现，这相比于传统的由函数和类组成的库来说提供了更好的代码重用机会。
        2. 高性能：如map可以高效地从十万条记录里面查找出指定的记录，因为map是采用红黑树的变体实现的。(红黑树是平横二叉树的一种)
        3. 高移植性：如在项目A上用STL编写的模块，可以直接移植到项目B上。
        4. 跨平台：如用windows的Visual Studio编写的代码可以在Mac OS的XCode上直接编译。
7. 代码举例：
    
    ```
    #include<iostream>
    using namespace std;
     
    //导入vector容器
    #include"vector"
    //导入算法：
    #include"algorithm"
    
    
    void test() {
    	//定义一个容器，存储整形数据
    	vector<int> v1;
    	//往容器中添加数据
    	v1.push_back(1);
    	v1.push_back(2);
    	v1.push_back(3);
    	v1.push_back(3);
    	v1.push_back(-1);
    
    	//通过迭代器访问容器
    	//迭代器就相当于一个指针
    	for (vector<int> ::iterator it = v1.begin(); it != v1.end();it++) {
    		cout << *it << endl;
    	}
    
    	//3. 算法(查找3的个数)
    	//算法和迭代器可以进行无缝连接
    	int num1 = count(v1.begin(), v1.end(), 3);
    
    	cout << "num1 = " << num1 << endl;
    }
    
    class Teacher {
    public:
    	int age;
    	char name[64];
    	void printT() {
    		cout << "age =" << age << endl;
    	}
    };
    
    void test2(){
    	Teacher t1, t2, t3;
    	t1.age = 26;
    	t2.age = 27;
    	t3.age = 28;
    	vector<Teacher> v1;
    	v1.push_back(t1);
    	v1.push_back(t2);
    	v1.push_back(t3);
    	//通过迭代器访问容器
        //迭代器就相当于一个指针
    	//数据结构和算法的分离
    	for (vector<Teacher> ::iterator it = v1.begin(); it != v1.end(); it++) {
    		cout << it->age << endl;
    	}
    }
    int main() {
    	test();
    	test2();
    	cout << "hello world！" << endl;
    	getchar();
    	return 0;
    }
    ```
    
### 容器 
1. 简介
    1. 经典的数据结构数量有限，但是我们常常重复着一些为了实现向量、链表等结构而编写的代码，这些代码都十分相似，只是为了适应不同数据的变化而在 细节上有所出入
    2. STL容器就为我们提供了这样的方便，它允许我们重复利用已有的实现构造自己的特定类型下的数据结构，通过设置一些**模板**，STL容器对最常用的数据结构提供了支持，这些**模板的参数**允许我们指定容器中元素的数据类型，可以将我们许多重复而乏味的工作简化。
    3. 容器部分主要由头文件<vector>,<list>,<deque>,<set>,<map>,<stack> 和<queue>组成。
    4. 容器的概念：**用来管理一组元素** 
2. 容器的分类
    1. 序列式容器（Sequence containers）
        1. 每个元素都有固定位置－－取决于插入时机和地点，和元素值无关。
        2. vector、deque、list  
    2. 关联式容器（Associated containers）
        1. 元素位置取决于特定的排序准则，和插入顺序无关 
        2. set、multiset、map、multimap
    3. 如下图
        
        ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/cpp29.png)
        
### 迭代器
1. 软件设计有一个基本原则，所有的问题都可以通过引进一个间接层来简化， 这种简化在STL中就是用迭代器来完成的。
2. 概括来说，迭代器在STL中用来将算法和容器联系起来，起着一种黏和剂的作用。
3. 几乎STL提供的所有算法都是通过迭代器存取元素序列进行工作的，每一个容器都定义了其本身所专有的迭代器，用以存取容器中的元素。
4. 迭代器部分主要由头文件<utility>,<iterator>和<memory>组成
    1. <utility>是一个很小的头文件，它包括了贯穿使用在STL中的几个模板的声明
    2. <iterator>中提供了迭代器使用的许多方法
    3. 而对于<memory>的描述则十分的困难，它以不同寻常的方式为容器中的元素分配存储空间，同时也为某些算法执行期间产生的临时对象提供机制,<memory>中的主要部分是模板类allocator，它负责产生所有容器中的默认分配器。
    
### 算法
1. STL提供了大约100个实现算法的模版函数，比如算法for_each将为指定序列中的每一个元素调用指定的函数，stable_sort以 你所指定的规则对序列进行稳定性排序等等。
2. 只要熟悉了STL之后，许多代码可以被大大的化简，只需要通过调用一两个算法模板，就可以完成所需要 的功能并大大地提升效率
3. 算法部分主要由头文件<algorithm>，<numeric>和<functional>组 成
    1. <algorithm>是所有STL头文件中最大的一个（尽管它很好理解），它是由一大堆模版函数组成的，可以认为每个函数在很大程度上 都是独立的，其中常用到的功能范围涉及到比较、交换、查找、遍历操作、复制、修改、移除、反转、排序、合并等等。
    2. <numeric>体积很小，只包括几个在序列上面进行简单数学运算的模板函数，包括加法和乘法在序列上的一些操作
    3. <functional>中则定义了一些模板类，用以声明函数对象
    
### C++标准库 
1. C++强大的功能来源于其丰富的类库及库函数资源。C++标准库的内容总共在50个标准头文件中定义
2. 在C++开发中，要尽可能地利用标准库完成。 
3. C++标准库的所有头文件都没有扩展名。C++标准库以<cname>形式的标准头文件提供
4. 在 <cname>形式标准的头文件中，与宏相关的名称在全局作用域中定义，其他名称在std命名空间中声明。
5. 在C++中还可以使用name.h 形式的标准C库头文件名 
6. 所有标准库头文件（略）



