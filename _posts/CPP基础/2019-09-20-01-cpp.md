---
layout: post
title: QT-第四节 布局管理、常用控件
category: CPP基础
tags: CPP基础
description: CPP基础
--- 

## 布局管理器
1. 所谓 GUI 界面，归根结底，就是一堆组件的叠加。我们创建一个窗口，把按钮放上面，把图标放上面，这样就成了一个界面。在放置时，组件的位置尤其重要。我们必须要指定组件放在哪里，以便窗口能够按照我们需要的方式进行渲染。这就涉及到组件定位的机制。
2. Qt 提供了两种组件定位机制：绝对定位和布局定位。
    1. 绝对定位：
        1. 绝对定位就是一种最原始的定位方法：给出这个组件的坐标和长宽值。
        2. 这样，Qt 就知道该把组件放在哪里以及如何设置组件的大小。但是这样做带来的一个问题是，如果用户改变了窗口大小，比如点击最大化按钮或者使用鼠标拖动窗口边缘，采用绝对定位的组件是不会有任何响应的。
        3. 这也很自然，因为你并没有告诉 Qt，在窗口变化时，组件是否要更新自己以及如何更新。或者，还有更简单的方法：禁止用户改变窗口大小。但这总不是长远之计。
    2. 布局定位
        1. 你只要把组件放入某一种布局，布局由专门的布局管理器进行管理。当需要调整大小或者位置的时候，Qt 使用对应的布局管理器进行调整。
3. 布局定位完美的解决了使用绝对定位的缺陷。
4. Qt 提供的布局中以下三种是我们最常用的：
    1. QHBoxLayout：按照水平方向从左到右布局；
    2. QVBoxLayout：按照竖直方向从上到下布局；
    3. QGridLayout：在一个网格中进行布局，类似于 HTML 的 table；
5. 系统提供的布局控件
    1. 创建一个继承自QWidget基类带UI的测试项目
    2. 双击打开Widget.ui,会跳转到“设计”栏目，在顶部有个layouts工具栏，下面列出的就是系统提供的布局控件
        1. Vertical Layout： 垂直布局
        2. Horizontal Layout： 水平布局
        3. Grid Layout： 网格布局
        4. Form Layout：
    3. 使用
        1. 这4个为系统给我们提供的布局的控件，但是使用起来不是非常的灵活，这里就不详细介绍了。
6. 利用widget做布局
    1. 第二种布局方式是利用控件里的widget来做布局，在Containers中
    2. widget控件就相当于iOS中的UIView，一切控件都继承自它，他是一个空白控件
    3. 在widget中的控件可以进行水平、垂直、栅格布局等操作，比较灵活。
    4. 常用布局操作：
        1. 如何让控件内部的子控件自动水平、垂直布局？
            1. 点击父控件，选择顶部**工具栏的**“|||”图标，则该控件内部的子控件全部水平布局
            2. 点击父控件，选择顶部**工具栏的**三个水平横线的图标，则该控件内部的子控件全部水平布局
        2. 如何居中显示控件？
            1. 左边的控件列表中spacers中后水平、垂直弹簧效果
            2. 左右拖入水平弹簧，则显示正常宽度，而且水平居中显示；
            3. 上下拖入垂直弹簧，则显示正常高度，且垂直居中显示
        3. 控件之间的间距布局
            1. 控件之间拖入水平弹框
            2. 点击这个弹簧，右下角spacer属性中有个sizeType，右边点击箭头下拉列表有各种方式
            3. 选择fixed的就是固定大小
            4. 然后设置sizeHint：宽度30，高度20.
            5. 此时运行项目再次伸缩窗口，登录、退出按钮间距就不会变化了
        4. 栅格布局Grid Layout
            1. 当n个控件的排列方式像一个表格一样时（n行，m列），可以采用栅格布局
        5. 如何让一个控件正好包含他的子控件大小呢？
            1. 点击这个控件，右下角属性中找到sizepolicy，展开
            2. 选择“垂直策略”，fixed即可
        6. 删除弹簧默认间距：
            1. 如果布局中使用了弹簧，那么弹簧上下左右有个默认的间距9
            2. 可以点击父控件，UI右下角属性，找到Layout，将这些间距全部清0
        3. 如何删掉布局呢？
            1. 不能直接删除布局
            2. 找到要删除布局的**父控件**
            3. 右击->布局->打破布局
            4. 然后才能删除这个布局
            5. 再重新布局这个控件内部子控件
    4. 再布局的同时我们需要灵活运用弹簧的特性让我们的布局更加的美观，下面布局一个登陆窗口：
        1. 向UI拖入一个widget控件，将用户名、输入窗口拖入，水平自动布局
        2. 同理密码、输入框，水平自动布局
        3. 再拖一个widget控件，内部拖2个pushButton，左边“登录”右边“退出”按钮，水平自动布局
        4. 点击UI主窗口，垂直自动布局
        5. 此时会发现：用户名部分、密码部分、登录退出部分全部占满整个屏幕
        6. 登录、退出按钮的布局
            1. 登录左边、退出右边各拖入水平弹簧，使这2个按钮水平居中
            2. 登录、退出按钮间拖入水平弹簧设置2者之间的固定距离
        7. 用户名、密码模块的布局
            1. 点击主窗口，打破布局
            2. 打破用户名模块的布局同时删除父控件widget
            3. 密码部分也这样处理
            4. 拖入一个widget空间，将用户名、输入框、密码、输入框这4个控件都拖入这个控件中
            5. 点击这个widget控件，顶部工具栏选择“栅格布局”
            6. 这样就可以使“用户名输入框”与“密码输入框”垂直对齐了。
        8. 整个界面布局
            1. 点击主窗口UI，自动垂直布局
            2. 用户名、密码部分，水平居中正常大小显示布局
                  


