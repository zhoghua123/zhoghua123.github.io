---
layout: post
title: MFC-第二节 MFC入门
category: CPP基础
tags: CPP基础
description: CPP基础
---

> 第一节是用windows系统API的C语言源码编写一个窗口
> 本节使用MFC来创建一个窗口

## MFC入门
1. 什么是MFC?
    1. 微软基础类库（英语：Microsoft Foundation Classes，简称MFC）是微软公司提供的一个类库（class libraries），**以C++类的形式封装了Windows API**，并且包含一个应用程序框架，以减少应用程序开发人员的工作量。
    2. 其中包含大量Windows句柄封装类和很多Windows的内建控件和组件的封装类。
    3. MFC把Windows SDK API函数包装成了几百个类，MFC给Windows操作系统提供了面向对象的接口，支持可重用性、自包含性以及其他OPP原则。
    4. MFC通过编写类来封装窗口、对话框以及其他对象，引入某些关键的虚函数（覆盖这些虚函数可以改变派生类的功能）来完成，并且MFC设计者使类库带来的总开销降到了最低。
    5. **即MFC就是Windows API的一层C++封装**

### 编写一个MFC程序
1. 代码的编写
    1. 项目的创建和之前一样，只是此次的源文件后缀为.cpp，因为MFC是由C++编写的，编写MFC程序需要包含`#include <afxwin.h>`头文件。
    2. 代码如下:
        
        ```
        //mfc.h文件
        #pragma once

        #include<afxwin.h>//mfc头文件
        //应用程序类CWinApp,派生类（子类）
        //CWinApp就相当于iOS的UIApplication
        class MyApp:public CWinApp
        {
        public:
        	//重写父类的虚函数
        	//MFC程序的入口地址
        	virtual  BOOL InitInstance();
        
        };
        
        //窗口框架类：CFrameWnd，派生类
        class MyFrame:public CFrameWnd
        {
        public:
        	MyFrame();//无参构造函数
        
        };
        
        //mfc.cpp文件
        #include"mfc.h"
        MyApp app;//有且只有一个全局的应用程序类对象
        BOOL MyApp::InitInstance() { //程序的入口地址
        	MyFrame *frame = new MyFrame;//1. 创建框架类对象
        	frame->ShowWindow(SW_SHOWNORMAL);//2. 显示窗口
        	frame->UpdateWindow();//3. 更新窗口
        	m_pMainWnd = frame;//4. 保存你的线程的主窗口对象的指针
        	return TRUE;//初始化正常返回true
        }
        
        MyFrame::MyFrame() {
        	Create(NULL, TEXT("MFC WINDOW"));//创建窗口
        }
        ```
    3. 配置环境后，代码才可编译运行：
        1. 右击项目->属性->常规->MFC的使用->选择“在共享DLL中使用MFC”->应用，确定
        2. 右击项目->属性->常规->字符集->使用unicode字符集(**必须设置**)

