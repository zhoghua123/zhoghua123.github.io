---
layout: post
title: Linux基础-Linux 应用安装、部署
category: Linux开发
tags: Linux开发
description: Linux开发
---

## 软件的安装工具
1. 软件包管理器: 软件的安装,卸载,查询等功能
2. 后端工具: rpm, dpt
    1. rpm: RedHat package Management 是Linux界的软件管理的一个工业标准
    2. dpt: debian的一个包管理器
3. 前端工具: yum
    1. 基于后端工具的软件包的管理,主要是解决rpm安装软件的时候的依赖的解决
    2. 因为使用rpm安装目标软件时，需要**手动**安装全部的依赖包，才能正常使用目标软件
    3. 通过yum安装目标软件时，会自动下载所有的依赖项，然后自动安装依赖项
4. 绿色软件安装和源码安装
    1. 绿色软件安装：只需要将该软件解压到安装目录，即可
    2. 源码安装：需要将源码进行编译，然后将编译后的二进制文件放到安装目录即可

### rpm安装
1. 它是一种软件打包发行并且实现自动安装的程序，需要用rpm程序安装的软件包，其后缀是.rpm，并可以对这种程序包进行安装、卸装和维护。
2. rpm命令的使用格式如下：`rpm   [选项]  [软件包名]`
3. 选项
    
    ```
    -i	指定安装的软件包
    -h	使用“#”显示详细的安装过程及进度
    -v	显示安装的详细信息
    -q	查询系统是否已安装指定的软件包
    -a	查看系统已安装的所有软件包
    -e	卸载软件包
    --nodeps	配合-e参数使用，强制卸载不检查依赖项
    --force	强制操作 如强制安装删除等
    ```
4. 常用命令

    ```
    安装一个包 
    # rpm -ivh <包名>
    --nodeps 如果该RPM包的安装依赖其它包，即使其它包没装，也强迫安装。 
    --force 即使覆盖属于其它包的文件也强迫安装 
    
    查询一个包是否被安装 
    # rpm -q <软件名>
    
    得到被安装的包的信息 
    # rpm -qi < 软件名> 
    
    列出该包中有哪些文件 
    # rpm -ql < 软件名> 
    
    列出服务器上的一个文件或目录属于哪一个RPM包 
    #rpm -qf <文件或目录名>
    
    列出所有被安装的rpm package 
    # rpm -qa 
    
    卸载一个包 
    # rpm -e <软件名>
    ```
 
### yum安装
1. yum仓库默认已经配置好了,在`/etc/yum.repos.d`目录下
2. 常用命令：

    ```
    1 配置一个自定义的仓库地址
    	/etc/yum.repos.d
    	local.repo
    2 查看yum中的所有包
      yum list
    3 搜索对应的软件名称
      yum search 软件名称
    4 安装命令
    	yum install <软件名>
    5 查看软件包
    	yum list |grep mysql
    	yum list installed 
    6 卸载软件包
    	yum remove <软件名>
    ``` 
3. 修改yum源
    
    ```
    #安装wget
    yum install wget -y
    
    # 备份原有yum源
    mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo_bak
    
    # 更换为阿里的yum源
    wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
    
    yum makecache
    
    yum -y update
    ```

### 其他安装
1. 果是在ubuntu平台，软件的安装可以通过互联网在线安装，更加方便快捷：
        
    ```
    sudo apt-get update	获得最新的软件包的列表
    sudo apt-get install xxx    从源中安装xxx软件
    sudo apt-get remove xxx 删除xxx软件
    ```

## JDK的安装
1. 从官网下载需要的jdk(jdk-8u161-linux-x64.tar.gz)
2. 把文件上传到`/usr/local/soft`目录
    1. 由于第一次`/usr/local/`下是没有soft文件夹的，`mkdir soft`创建
    2. 从mac本机将文件上传到远程linux服务器，使用scp命令
        
        ```
        # mac打开终端，执行以下命令：P代SSH的表端口号，22 表示更改SSH端口后的端口，如果没有更改SSH端口可以不用添加该参数（IP）。
        # scp -P 22 /Users/mac/Desktop/jdk-8u161-linux-x64.tar.gz root@172.16.166.3:/usr/local/soft/
        # 使用这个：不需要添加端口参数-P
        scp /Users/mac/Desktop/jdk-8u161-linux-x64.tar.gz root@172.16.166.3:/usr/local/soft/
        # 如果是上传文件夹 添加-r参数
        scp -r ...
        ```
3. 进行解压缩 `tar -zxvf /usr/local/soft/jdk-8u161-linux-x64.tar.gz -C /usr/local`
    1. 此时local下有个`jdk1.8.0_161`文件夹
    2. 将该文件重命名为jdk1.8: `mv jdk1.8.0_161/ jdk1.8`
    3. cd到jdk1.8目录下，查看目录会发现有个bin目录,该目录下存放的都是可执行命令
    4. 说明jdk安装包是绿色版的，直接解压即可使用
4. 配置环境变量 
    
    ```
    vi /etc/profile.d/jdk.sh
    #bin/bash
    export JAVA_HOME=/usr/local/jdk1.8
    export PATH=$JAVA_HOME/bin:$PATH
    ```
5. 重新加载配置文件 `source /etc/profile`
6. 验证配置是否正确: 
    
    ```
    # 查看java版本
    java -version
    # 根据环境变量查看安装目录
    echo $JAVA_HOME
    ```


## MYSQL的安装
1. 先把postfix 和mariadb-libs卸载掉，不然的会有依赖包冲突 
    
    ```
    rpm -e postfix mariadb-libs
    ```
2. 安装mysql的依赖net-tools和 perl
    
    ```
    yum -y install net-tools perl
    ``` 
3. 安装Mysql的包 
    
    ```
    cd /usr/local/soft/mysql5.7/
    yum install -y *.rpm
    ```
4. 设置数据库开机启动   	`systemctl enable mysqld`
5. 启动MySQL服务 `systemctl start mysqld`
6. 查看临时密码:`grep 'temporary password' /var/log/mysqld.log`
7. 登录账户修改密码 
    
    ```
    mysql -uroot -p'Lgi4FK#X2p4g'
    ALTER USER 'root'@'localhost' IDENTIFIED BY 'WolfCode_2020';   
    ```
8. 输入 quit 退出, 重新登录 mysql -u root -p'WolfCode_2020'
9. 开放远程登录权限
    
    ```
    GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'WolfCode_2020'  WITH GRANT OPTION; 
    FLUSH PRIVILEGES;
    ``` 
10. 开放3306端口
    
    ```
    firewall-cmd --zone=public --add-port=3306/tcp --permanent
    firewall-cmd --reload
    ``` 


## Tomcat的安装


## CRM部署应用


