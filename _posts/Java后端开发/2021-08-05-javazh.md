---
layout: post
title: 项目实战
category: Java后端开发
tags: Java后端开发
description: Java后端开发
---  

## 项目实战
### 企业开发中常见的后台管理系统
1. CRM(Customer Relationship Management): 客户关系管理
    1. 管理客户信息（个人信息、订单信息等）
2. OA(Office Automation): 办公自动化
    1. 基于工作流概念，使企业内部人员方便快捷地共享信息，高效协同工作
3. ERP(Enterprise Resource Planning): 企业资源计划
    1. 物资资源管理、人力资源管理、财务资源管理、信息资源管理等集成一体化

### 项目构建步骤
> 整个项目的开发流程是：
> 1. 新建数据库，初始化表结构
> 2. 构建po层
> 3. 构建Mapper层
> 4. 构建service层
> 5. 构建controller层

### 初始化项目
1. IDEA新建一个Module，命名为JiaKao
2. 新建数据库，初始化表结构
    1. 将准备好的数据库表结构、测试数据文件夹bk_jaikao.sql、data.sql放入到项目目录sql中
    2. IDEA点击右侧database,展开，点击顶部的+ ->Schema->Name为jiakaox,priview第一句修改为`create datebase`点击OK
    3. 右击jiakao->Run SQL Script...->选择项目中的bk_jaikao.sql语句那个文件夹即可->点击OK就会执行文件中的sql语句
    4. 然后同样的步骤，选择data.sql,会自动生成一些测试数据
3. 构建po层
    1. 新建com.zh.jk.pojo.po包名，具体原因详见【项目中的各种Object】
    2. 新建po的模型类
        1. 如果有n张表，那么就要手动建n个object，比较麻烦
        2. 可以使用MyBatis Generator，自动生成，详情见【MyBatis Generator】讲解

## MyBatis-Plus

### MyBatis Generator

#### 简介
1. 官方网址[http://mybatis.org/generator/](http://mybatis.org/generator/)
2. MyBatis Generator是MyBatis官方提供的代码生成器
3. 可以根据数据库信息，逆向生成Model类、Mpper类、Mapper配置文件xml
4. 大大节省开发者的编码时间，提高开发效率

#### 使用步骤
1. 在项目的test文件夹下新建一个resources目录，然后在下面新建一个generatorConfig.xml文件
    
    ```
    <?xml version="1.0" encoding="UTF-8" ?>
    <!DOCTYPE generatorConfiguration PUBLIC
                    "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
                    "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">
    <generatorConfiguration>
    
    <context id="default" targetRuntime="MyBatis3Simple">
        <commentGenerator>
            <!--生成的类、xml中，去除所有的注释-->
            <property name="suppressAllComments" value="true"/>
        </commentGenerator>
        <!--数据库连接：要将哪个数据库中的表逆向生成-->
        <jdbcConnection driverClass="com.mysql.jdbc.Driver"
                        connectionURL="jdbc:mysql://localhost:3306/jiakaox?servieTimerzone=GMT%2B8" userId="root" password="root"/>
                        
        <!--生成Model的位置:src/test/java/com.zh.jk.pojo.po
        targetPackage： 目标包名
        targetProject： 目标工程
        -->
        
        <javaModelGenerator targetPackage="com.zh.jk.pojo.po" targetProject="src/test/java"/>
        
        <!--XML的位置：在src/test/resources/com.zh.jk.mapper下-->
        <sqlMapGenerator targetPackage="com.zh.jk.mapper" targetProject="src/test/resources"/>
        
        <!--Mapper的位置src/test/java/com.zh.jk.mapper-->
        <javaClientGenerator type="XMLMAPPER" targetPackage="com.zh.jk.mapper" targetProject="src/test/java"/>
        
        <!--数据库中哪些表需要生成-->
        <!--%代表所有表-->
         <table tableName="%" />
        <!--指定几张表生成-->
    <!--    <table tableName="coach" />-->
    <!--    <table tableName="dict_type" />-->
    </context>
    </generatorConfiguration>
    ```
2. 项目的pom.xml文件添加插件依赖
    
    ```
    <build>
        <plugins>
            <plugin>
                <groupId>org.mybatis.generator</groupId>
                <artifactId>mybatis-generator-maven-plugin</artifactId>
                <version>1.3.7</version>
                <configuration>
                    <!-- 指定配置文件的位置 -->
                    <configurationFile>src/test/resources/generatorConfig.xml</configurationFile>
                    <!--每次重新生成会覆盖原来生成的-->
                    <overwrite>true</overwrite>
                    <verbose>true</verbose>
                </configuration>
                <!-- 插件依赖的第三方库 -->
                <dependencies>
                    <dependency>
                        <groupId>mysql</groupId>
                        <artifactId>mysql-connector-java</artifactId>
                        <version>5.1.49</version>
                    </dependency>
                </dependencies>
            </plugin>
        </plugins>
    </build>
    ```
3. 执行插件生成
    1. 点击右侧maven菜单->找到对应项目->plugins->找到mybatis-generator插件，展开
    2. 击mybatis-generator:generate
    3. 就可以看到test文件夹下的对应目录生成了相应的文件
    4. 然后将src/test/java/com.zh.jk.pojo.po下面的类全部复制到src/main/java/com.zh.jk.pojo.po中
    
#### 总结
1. 插件尽管自动生成了Model类、Mpper类、Mapper配置文件xml，但是通常仅仅只需要po中的类
2. 该插件会自动将数据库的下划线转化为驼峰标识，比如数据库的字段为created_time,转化为模型类的属性为createdTime




## 项目实战知识积累

### 如何打开别人项目？
1. 首先看这个项目连接的数据库，将相应的数据库创建，或者能够连接上相应的数据库
    1. 一般项目中会有这个项目用到的表的sql语句文件夹
    2. 点击右边菜单database=>+->DataSource->MySQL->先登录上MySQL
    3. 右击schemas->new->Schema->Name：数据库名称zhtest; preview中，第一句修改为`create database`,点击OK即可
    4. schemas下面会多出一个数据库zhtest
    5. 右击zhtest->Run SQL Script...->选择项目中的sql语句那个文件夹即可->点击OK就会执行文件中的sql语句
2. 如果是springboot项目，直接运行入口类
3. 如果是非springboot项目
    1. 如果是使用本地的Tomcat，则IDEA配置好，然后使用IDEA运行
    2. 如果是直接使用tomcat插件，`tomcat7-maven-plugin`,则直接使用Maven的生命周期运行项目tomcat7:run，

### 如何创建一个项目
1. 底层建设（数据库）
    1. 使用PowerDesigner来设计数据库，更加方便，具体使用看项目第一节视频：34分钟开始
2. 后台管理端
3. 客户端

#### 1.如何设计项目中的字典？
1. 何为字典？
    1. 一个项目中有n个地方可以选择枚举值，比如：性别、职业等等，前端的情况是点击下拉可以选择各种枚举
    2. 这些枚举值在数据库中的存储就是字典
2. 如何设计数据字典？
    1. 表中肯定会有枚举的名称、对应值，这两个字段，比如：nam为男，value为1
    2. 通常不会将n个字典建立n张表，通常的做法就是全部放一张表，或者2张表
3. 数据字典统一放一张表
    
    ```
    表的主键    代表哪个类型  枚举名称    枚举值
    id          type        name      value
    1           sex         男         0
    2           sex         女         1
    3           job         教师       0
    ...   
    ```
4. 数据字典统一放2张表
    1. 第一张表专门放字典的类型信息
    2. 第二张表专门放枚举的信息
    3. 第二张表外键引用第一张表
    
    ```
    //类型表1
    主键      名称   值         简介
    id      name    value     intro
    0       性别      sex      性别类型
    1       职业      job      职业类型
    
    //枚举表2
    主键  名称      值       序号（控制展示的顺序）   类型表1的主键    启用
    id    name     value    sn                      type_id     enabled     
    ```


### 项目中的各种Object
> 理论上一张表对应一个Object模型对象，但是通常这个对象需要封装改造，才能返回给客户端显示，因此针对这个流程，定制了一系列规范
> 在阿里巴巴的开发手册， 定义了各种Object，比如：PO、BO、D TO、VO、POJO、Query

#### PO (Persistent Object):持久化对象
1. 属性跟数据库表的字段对应，一个PO对象对应数据库表的一条记录

#### BO (Business Object):业务对象
1. 一类业务就会对应一个BO， 除了get\set方法以外，它会有很多业务操作，比如针对自身数据进行计算的方法
2. 例子1
    1. P01是教育经历，PO2是工作经历，PO3是项目经验。 BO是简历，包含PO1~P03
3. 例子2
    1. PO1是交易记录，P02是登录记录，PO3是商品浏览记录，P04是添加购物车记录，P05是搜索索记录
    2. BO是个人网站行为， 包含P01~P05

#### DTO(Data Transfer Object):数据传输对象
1. 很多时候并不需要PO的所有属性(数据库表的所有字段)传输给客户端
2. 所以，可以根据客户端的业务需要对PO、BO的属性进行删减或增加，重新组装成DTO对象

#### VO(View Object):视图对象
1. 传输给客户端的数据展示对象，通常对应一个页面
2. 在有些时候，业务字段的值和最终展示的值是不一样的，比如：在DTO中，sex的值是0、1
    1. 页面A的VO中， sex的值是男生、女生
    2. 页面B的VO中， sex的值是帅哥、美女

#### POJO(Plain Ordinary Java Object):简单的Java对象
1. 是PO、BO、D TO、VO的统称

#### Query：数据查询对象

![图1](https://gitee.com/zhonghua123/blogimgs/raw/master/img/javazh-38.png) 
    

