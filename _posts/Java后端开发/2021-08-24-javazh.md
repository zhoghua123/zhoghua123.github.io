---
layout: post
title: 项目实战八-前后端分离驾考项目（七）
category: Java后端开发
tags: Java后端开发
description: Java后端开发
--- 

## Shiro

### 权限管理
1. 权限管理：对已经**认证成**功的用户进行**授权**
    1. 认证成功：比如使用用户名、密码登录成功
    2. 授权：比如赋值相应的操作权限（资源）
2. 实现方案
    1. 最简单粗暴：用户直接跟资源（权限）挂钩
        1. 设计成3张表：用户表（sys_user)、资源表（sys_resource)、用户资源表（sys_user_resource)
        
            ```
            sys_user
            id      name
            1       jack
            2       rose
            
            sys_resource
            id      name
            1       用户-查询
            2       用户-添加
            3       用户-删除
            
            sys_user_resource
            user_id     resource_id
            1           1
            1           3
            2           2
            2           2
            2           3
            
            ```
        2. 缺点：sys_user_resource表中数据冗余
    2. 建议采用：RBAC(Role-base Access Control)，以角色为基础的访问控制
        1. 用户跟角色挂钩、角色与资源挂钩，设计成5张表
        2. 用户表（sys_user)、角色表（sys_role)、资源（sys_resource)
        3. 用户角色表（sys_user_role）、角色资源表（sys_role_resource）

        ![图1](https://gitee.com/zhonghua123/blogimgs/raw/master/img/javazh-47.png) 
        
        
        ```
        sys_user
        id      name
        1       jack
        2       rose
        
        sys_role
        id      name
        1       总经理
        2       销售经理
        3       前台
        
        sys_resource
        id      name
        1       用户-查询
        2       用户-添加
        3       用户-删除
        
        sys_role_resource
        role_id     resource_id
        1           1
        1           2
        1           3
        2           1
        2           3
        3           1
        
        sys_user_role
        user_id     role_id
        1           1
        2           2
        2           3
        ```


