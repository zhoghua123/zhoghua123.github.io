---
layout: post
title: Java进阶-Nginx
category: Java后端开发
tags: Java后端开发
description: Java后端开发
---  

### Nginx简介
1. Nginx (engine x) **是**一个高性能的HTTP（网络**静态**资源服务器）和反向代理**服务器**，也是一个IMAP/POP3/SMTP服务器。
    1. 动态请求：需要后台程序处理逻辑，比如：查询数据库数据-》后台技术：web技术
    2. 静态请求：处理静态资源（html、js、css）
    3. Nginx只能处理静态请求，Tomcat技能处理动态请求也能处理动态请求。
2. Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，第一个公开版本0.1.0发布于2004年10月4日。 开源。 也有商业版本：Nginx plus--> 商业版
3. 其特点是占有内存少，并发能力强，事实上nginx的并发能力确实在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等。
4. Tomcat: 150并发; Nginx: 并发量官方文档5w，实际3w没有问题，而且占用内存150M左右
5. Nginx就是一个后台服务器，专门用来存放静态资源的服务器

#### 1.正向代理和反向代理
1. 正向代理:比如要访问youtube,但是不能直接访问，只能先找个翻墙软件，通过翻墙软件才能访问youtube. 这种方式就叫做**正向代理**。
    
    ![图1](https://gitee.com/zhonghua123/blogimgs/raw/master/img/javazh-59.png) 
    
    1. 分析
        1. 客户端做代理服务器的相关配置（代理服务器的地址等），然后访问推特网站
        2. 代理服务器会将推特访问包装成访问代理服务器的请求
        3. 防火墙没有对代理服务器进行限制，会访问到墙外部署的代理服务器
        4. 代理服务器获取到封装请求，解封装去访问推特网站服务器
        5. 推特网站响应数据，代理服务器将响应数据进行包装，翻墙到客户端
        6. 客户端拿到包装的响应进行解包展示
    2. **正向代理的特点：**
        1. 客户端是知道目标访问地址（代理服务器的地址）
        2. 代理服务器专门对客户端工作的
        3. 这台服务器专门为客户端工作，就是一个代理，所以叫代理服务器
2. 反向代理:指的是用户要访问youtube,但是youtube悄悄地把这个请求交给后台N台服务器中的其中一台来做，这种方式就是反向代理了。
    
    ![图1](https://gitee.com/zhonghua123/blogimgs/raw/master/img/javazh-60.png) 
    
    1. 分析：
        1. 客户端发送域名请求数据
        2. 由于请求量并发量非常大，因此后台部署了n台服务器
        3. 客户端请求数据先到nginx服务器
        4. nginx服务器来进行分配具体的目标服务器
        5. 目标服务器响应数据给nginx服务器，然后返回给客户端
        6. 这里的nginx服务器也是一个代理作用，但是它不是为客户端做代理，而是为服务器做代理，因此也叫反向代理服务器
    2. 反向代理特点：
        1. 主要给后台应用提供服务，代理的就是服务端，保护服务端，防止对外暴露，客户端有请求找我就行
        2. 对于客户端来说根本不知道请求的URI是有哪个服务器提供的服务

#### 2.常见的负载均衡策略
1. 使用硬件负载均衡策略,如使用F5,Array等负载均衡器.（比较贵）
2. 使用软件进行负载均衡Nginx, 自己封装的负载均衡服务器
3. 如使用阿里云服务器均衡SLB
4. 使用Nginx+Keepalived
5. 其他软件负载均衡如LVS(Linux Virtual Server),haproxy等技术

#### 3.Nginx优点
1. Nginx 可以在大多数 Unix、Linux OS 上编译运行，并有 Windows 移植版。 Nginx 的1.4.0稳定版已经于2013年4月24日发布，一般情况下，对于新建站点，建议使用最新稳定版作为生产版本，已有站点的升级急迫性不高。
2. Nginx 的源代码使用 2-clause BSD-like license。
3. Nginx 是一个很强大的高性能Web和反向代理服务器，它具有很多非常优越的特性：
    1. 在连接高并发的情况下，Nginx是Apache服务器不错的替代品：Nginx在美国是做虚拟主机生意的老板们经常选择的软件平台之一。能够支持高达 50,000 个并发连接数的响应，感谢Nginx为我们选择了 epoll and kqueue作为开发模型。
5. 下载
    1. 打开网址`https://nginx.org/`，点击右侧`download`，下载最新的Stable version
    2. 比如:`nginx-1.20.1  pgp`

#### 4.环境搭建

### Nginx通用语法

### Nginx基础概念

### 常用配置

### Nginx扩展

### 搭建高可用环境


