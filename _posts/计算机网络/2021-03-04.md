---
layout: post
title: 网络协议九：其他协议
category: 计算机网络
tags: 计算机网络
description: 计算机网络
---

## WebSoclet
1. HTTP与WebSoclet
    1. HTTP请求的特点：通信只能由客户端发起。所以，早期很多网站为了实现推送技术，所用的技术都是轮询
    2. 轮询是指由浏览器每隔一段时间（如每秒）向服务器发出HTTP请求，然后服务器返回最新的数据给客户端
    3. 为了能更好的节省服务器资源和带宽，并且能够更实时地进行通讯，HTML5规范中出现了WebSocket协议
2. WebSocket
    1. WebSocket，**是**基于TCP的支持全双工通信的**应用层协议**
        1. 在2011年由IETF标准化为[RFC 6455](https://tools.ietf.org/html/rfc6455)，后由[RFC 7936](https://tools.ietf.org/html/rfc7936)补充规范
        2. **客户端、服务器，任何一方都可以主动发消息给对方**
    2. WebSocket的应用场景很多
        1. 社交订阅、股票基金报价、体育实况更新、多媒体聊天、多玩家游戏等
3. HTTP与WebSoclet区别
    1. WebSocket和HTTP属于平级关系，都是应用层的协议
        1. 其实TCP本身就是支持全双工通信的（客户端、服务器均可主动发消息给对方）
        2. 只是HTTP的“请求-应答模式”限制了TCP的能力
    2. WebSocket使用80（ws://）、443（wss://）端口，可以绕过大多数防火墙的限制
        1. WebSocket协议头为`ws://`或者`wss://`,wss是ws的安全版，跟http、https一样
        1. ws://example.com/wsapi
        2. wss://secure.example.com/wsapi
    3. 与HTTP不同的是，WebSocket需要先建立连接
        1. **注意：**这个建立连接是应用层的连接建立，不是TCP的连接建立
        2. 这就使得WebSocket成为一种有状态的协议，之后通信时可以省略部分状态信息
        3. 而HTTP请求可能需要在每个请求都额外携带状态信息（如身份认证Cookie等）

### WebSocket建立连接
1. WebSocket需要借助HTTP协议来建立连接（也叫作握手，Handshake）
    1. 由客户端（浏览器）主动发出握手请求


