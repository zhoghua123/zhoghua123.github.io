---
layout: post
title: 第六章 传输层(一)
category: 计算机网络
tags: 计算机网络
description: 计算机网络
---

> 回顾：网络层作用就是把一个数据包从一台机器成功的发送到另一台机器      
> 引言： 经过网络层的作用之后，下面需要知道: 

1. 怎样实现应用进程之间的通信，网络只是机器之间的通信
2. 通信的最终服务点不是某台机器，而是某台机器上面的某个应用进程
3. 怎样实现应用进程之间的传输呢? 这就是传输层的任务        


**本章要素**      
  
1. 传输服务 
2. 传输协议的要素 
3. Internet的传输协议 


# 传输服务

## 传输层的功能及在协议层中的作用
1. 传输层在OSI模型中的位置        
     ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/translate01.png)
    
    1. 资源子网和通信子网的划分是以传输层作为界限，传输层以上为资源子网（这些协议只有主机上才有），传输层以下为通信子网（在路由器上必须包含这些协议）
    2. 介于通信子网和资源子网之间，对高层用户屏蔽了通信的细节
        1. 传输层对用户提供了一组接口
        2. 当一个应用进程需要发数据给另外一个应用进程时，调用接口即可 
    3. 弥补了通信子网所提供服务的差异和不足，提供端到端之间的无差错保证 
    4. 传输层工作的简繁取决于通信子网提供服务的类型
        1. 如果下层的网络层比较给力，那么传输层就工作少，反之，工作多
    
2. 传输层与上下层之间的关系     

    ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/translate02.png)
    
    1. 传输层使高层用户看见的好象就在两个传输层实体之间有一条端到端的、可靠的、全双工的通信通道（即数字管道） 
        1. 可靠的： 1.发送的数据不会丢失 2. 发送的顺序不会乱
        2. 传输层的传输实体要为很多应用进程来服务，为了确定是哪个应用的实体，因此对每一个应用进程到传输层都有一个标识，这个标识就叫做传输层的地址（端口号）
        3. 同样每一个主机都有一个网络地址（IP地址）

## 传输层提供的服务

1. 面向连接的服务：通信可靠，对数据有校验和重发，如TCP/IP模型中应用层协议FTP、Telnet等（可靠）
    1. 保证数据的不流失： 通过校验检查数据是否丢失，丢失则重发，让上层感觉数据不会丢失
    2. 发送接收顺序不乱： 通过传输层的缓冲实现，排好顺序后给上层
2. 面向非连接的服务：对数据无校验和重发，通信速率高
  如TCP/IP模型中应用层协议SNMP、DNS等（不可靠）

## 传输服务原语 
1. 传输层要对接的上层是应用层或者应用进程，那么就需要知道如何调用传输层，归根究底就是一组接口，即一组函数调用
2. 因此设计传输层的时候要设计用户怎样来调用，用户调用的这些接口就叫做传输服务原语
3. **传输服务原语是应用程序和传输服务之间的接口**
4. 一个典型的**面相连接的**服务原语如下： 
        ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/translate03.png)
       1. 场景： 众多服务器就相当于街上的一个一个商店，买什么东西到什么商店，对商店来讲： 1.开门，让营业员一个一个准备好，如果客户要买东西救护进来沟通，然后服务，服务好了继续等待
       2. listen:  打开店门，营业员等待客户上门
       3. connect: 客户打招呼
       4. send:  营业员服务
       5. receive： 营业员服务
       6. disconnect： 服务完毕，客户离开
5. 伯克利套接字（Berkeley Sockets）
    1. 在TCP/IP协议当中用的最多的服务原语就是伯克利套接字
    2. 这个服务原语跟上面的相比只是把它划分的更详细
        ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/translate04.png)
        1. socket： 创建一个新的通信端点，每一个应用进程都要创建一个套接字标志，两个应用进程之间通信就通过两个对应的套接字之间通信
        2. bind： 把这台机器的标识（本机地址）加入到这个应用进程的socket中去
        3. listen： 宣布可以连接
        4. accept： 等待别人给我一个连接的请求
        5. 。。。
6. 典型的套接字应用过程 
    1. 套接字的使用与文件的使用类似 
        ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/translate05.png)

# 传输协议的要素 
1. 上面展示了传输层需要实现的哪些功能展示了，实现这些功能要考虑哪些问题呢？ 

