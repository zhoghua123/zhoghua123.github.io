---
layout: post
title: 网络协议二：MAC地址与IP地址
category: 计算机网络
tags: 计算机网络
description: 计算机网络
---

## MAC地址

### 简介
1. 每一个**网卡**都有一个6字节（48bit）的MAC地址（Media Access Control Adress），即MAC地址就是网卡地址
2. MAC地址全球唯一，**固化**在了网卡的ROM中，由IEEE802标准规定
    1. 前3字节：OUI(Organizationally Unique Identifier)组织唯一标识符
        1. 由IEEE的注册管理机构分配给厂商
    2. 后3字节：网络接口标识符
        1. 由厂商自行分配
    3. 即：只要同一个厂商生产的网卡，每个网卡的前三个字节的MAC地址是一样的
    3. 举例： 
        
        ```
        //组织唯一标识符 网络接口标识符
        40-55-82-0A-8C-6D
        ```
3. OUI查询：可以查询出一个MAC地址属于哪个厂商
    1. [http://standards-oui.ieee.org/oui/oui.txt](http://standards-oui.ieee.org/oui/oui.txt)
    2. [https://mac.bmcx.com](https://mac.bmcx.com)

### MAC地址的表示格式
1. windows:`40-55-82-0A-8C-6D`
2. Linux、Android、Mac、iOS: `40:55:82:0A:8C:6D`
3. Packet Tracer: `4055.820A.8C6D`
4. 当48位全为1时，代表广播地址: `FF-FF-FF-FF-FF-FF`
    1. 当发送ARP广播时，发送的数据有：源PC的IP地址-目的PC的IP地址、源PC的MAC地址-`FF-FF-FF-FF-FF-FF`等
    2. 即只要发送到一个PC的数据中目的MAC地址为`FF-FF-FF-FF-FF-FF`,说明这个发送是ARP广播，是来想目的IP对应的PC索要MAC地址的

### MAC地址的操作
1. 查看MAC地址：ipconfig /all
2. 修改MAC地址
    1. 更改适配器选项-属性-配置-高级-网络地址
    2. 填写的时候需要把减号（-）去掉
3. 有时可以通过修改MAC地址蹭网
4. 疑问：MAC地址不是固定写死在网卡硬件中的吗？ 为何可以修改呢？
    1. 网卡中的MAC地址是固定地址，操作系统也可以设置虚拟的MAC地址
    2. 如果操作系统没有设置MAC地址，那么就用网卡的固定MAC地址，如果设置则使用设置地址
    
### MAC地址的获取
1. 当不知道对方主机的MAC地址时，可以通过发送ARP广播获取对方的MAC地址
    1. 获取成功后，会缓存IP地址、MAC地址的映射信息（在PC本机中缓存），俗称：ARP缓存
    2. 通过ARP广播获取的MAC地址，属于动态（dynamic）缓存
    3. 存储时间比较短（默认是2分钟），过期了就自动删除
2. 相关命令(PC的终端查询)
    
    ```
    arp -a [主机地址]：查询ARP缓存
    arp -d [主机地址]：删除ARP缓存
    arp -s 主机地址 MAC地址：增加一条缓存信息（这是静态缓存，存储时间较久，不同系统的存储时间不同）
    ```

## IP地址
1. 简介
    1. IP地址（Internet Protocol Address）：互联网上的每一个主机都有一个IP地址
        1. 最初是IPv4版本，32bit（4字节），2019年11月25日，全球的IP地址已经用完
        2. 后面推出了IPv6版本，128bit（16字节）
2. IP地址的组成
    1. IP地址由2部分组成：网络标识（网络ID）、主机标识（主机ID）
        1. 通过子网掩码（subnet mask）可以计算出网络ID：子网掩码 & IP地址
    2. 主机所在的网段 = 子网掩码 & IP地址
        1. 网段其实
    3. 计算机和其他计算机通信前，会先判断目标主机和自己是否在同一网段
        1. 同一网段：不需要由路由器进行转发
        2. 不同网段：交由路由器进行转发

