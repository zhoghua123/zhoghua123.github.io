---
layout: post
title: 网络协议三：路由
category: 计算机网络
tags: 计算机网络
description: 计算机网络
---

## 路由
1. 在不同网段之间转发数据，需要有路由器的支持
2. 默认情况下，路由器只知道跟它**直连**的网段，非直连的网段需要通过静态路由、动态路由告诉它
    1. 静态路由
        1. 管理员手动添加路由信息
        2. 适用于小规模网络
    2. 动态路由
        1. 路由器通过路由选择协议（比如RIP、OSPF）自动获取路由信息
        2. 适用于大规模网络
    
### 静态路由配置
![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/wlxy-14.png)

1. 计算机0、1是通过路由器直连的2个网段
2. 计算机0如果想计算机3发送数据，这必须经过两个路由器，那么如何手动配置呢？ 
    1. 路由器0配置路由表如下：（实现计算机0向3发送数据）
        1. 网络：193.169.2.0  计算机2的网段地址
        2. 掩码： 255.255.255.0 计算机2的网段的子网掩码
        3. 下一跳：194.170.1.2 路由器1的端口IP地址
    2. 路由器3配置路由表如下：（实现计算机3向0发送数据）
        1. 网络：192.168.1.0  计算机0的网段地址
        2. 掩码： 255.255.255.0 计算机0的网段的子网掩码
        3. 下一跳：194.170.1.1 路由器1的端口IP地址
    3. 以上配置之后，便可以实现计算机0向计算机3相互通信
3. 下图让4台主机之间可以互相通信
    
    ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/wlxy-15.png)
    
    ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/wlxy-16.png)

### 数据包的传输过程
1. 这里仅仅是简述一下数据包的传输过程，后面详细学到网络分层时，会再次详细讲解数据包的传输过程
    
    ![图1](https://raw.githubusercontent.com/zhoghua123/imgsBed/master/wlxy-17.png)
    
    1. MAC地址获取过程： A发ARP广播到路交换机0的网段，获取路由器0的MAC地址,路由器0发送ARP广播到交换机1的网段获取路由器1的MAC地址，路由器1发送ARP广播到交换机2的网段获取F的MAC地址


