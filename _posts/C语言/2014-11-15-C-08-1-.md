---
layout: post
title: 第九章-字符串
category: C语言
tags: C
keywords: C 
---

## 简介
1. 在第七章-数组与第八章-指针中都简单的讲了字符串
2. 本章将着重讲解C语言的字符串
3. 在各种编程语言中，字符串的地位都十分重要，C语言中并没有提供“字符串”这个特定类型，而是以**特殊字符数组**的形式来存储和处理字符串，这种字符数组必须以空字符’\0’结尾，因此，也将这种特定字符数组称为C风格字符串
4. 本节讨论字符串和字符串的一些处理函数。 C风格字符串是字符数组的一种特例，这个“特”字体现在“以’\0’（空字符，null character）结尾”，如何声明创建一个C风格字符串，如何使用C风格字符串，这是本节要解决的问题

## 字符数组
1. 字符数组的定义
    1. 形式为：
        1. `char  数组名[ 常量表达式 ]；`
        2. 如：`char a[100]; `
        3. 定义了一个字符数组，名字叫c；
        4. a数组的数据类型是char 
        5. [100] 表示a中存储有100个字符元素；
        6. 这100个字符元素的名字分别是：[0],a[1],a[2], ...... ,a[99] 
2. 字符数组的初始化
    1. 字符数组的常见初始化形式如下例：
        
        ```
        char c[5]={ ‘a’,’b’,’c’,’d’,’e’ };
        ```
        
        1. 如果初始化时初值个数大于数组长度，会报错。
        2. 如果初始化时初值个数小于数组长度，系统会为剩余元素自动赋值为'\0' 。
    2. C语言允许用字符串常量来初始化字符数组：
        1. `char c[100] ={"C Program"};`
        2. 上面的例子也可以写成：`char c[100] ="C Program"; `
    3. 两种初始化的区别：
        1. 字符串就是字符数组,字符数组不一定是字符串
            
            ```
            //字符串就是结尾带\0的字符数组,只是展示方式不同
            // "jack" == {'j','a','c','k','\0'}
            ```
        2. **字符串**的一个初始化
            
            ```
            void test2()
            {
                // 都是字符串
                char name[8] = "it";
                char name2[8] = {'i', 't', '\0'};
                // \0的ASCII码值是0(相当于\0)
                char name3[8] = {'i', 't', 0};
                //元素不够,直接补零(相当于\0)
                char name4[8] = {'i', 't'};
                // 不算是一个字符串（只能说是一个字符数组）
                char name5[] = {'i', 't'};
            }
            ```
3. 字符数组的输入输出 
    1. 字符指针变量与字符数组
        1. `char  *cp;` 与 `char str[20];`
        2. str由若干元素组成，每个元素放一个字符；而cp中存放字符串首地址
            
            ```
            char  str[20];     
            str=“I love China!”;  //错误
            char   *cp; 
            cp=“I love China!”;   //正确
            ```
            
            1. str是地址常量；cp是地址变量
    2. cp接受键入字符串时,必须先开辟存储空间
            
        ```
        //正确
        char  str[10];
        scanf(“%s”,str); 
        //错误
        char  *cp;
        scanf(“%s”,  cp); 
            
        //修改为
        char *cp,str[10];
        cp=str;
        scanf(“%s”,cp);     
        ```
    3. 字符指针输出字符 
            
        ```
       void main( )
       {   char  *string=“I  love China!”;
            printf(“%s\n”,string);
            string+=7;
            while(*string)
             {      putchar(string[0]);
                     string++;
              }
        } 
        ```
4. 字符串与字符数组的关系 
    1. 字符串用一维字符数组存放
    2. 字符数组具有一维数组的所有特点
        1. 数组名是指向数组首地址的地址常量
        2. 数组元素的引用方法可用指针法和下标法
        3. 数组名作函数参数是地址传递等
    3. 区别
        1. 存储格式：字符串结束标志
        2. 赋值方式与初始化
        3. 输入输出方式：%s  %c 
    
## (char *a  char a[])小结 
> 用字符数组和字符指针变量都能实现字符串的存储和运算，但它们二者之间是有区别的，不应混为一谈，主要有以下几点

1. 字符数组由若干个元素组成，每个元素中放一个字符，而字符指针变量中存放的是地址（字符串第1个字符的地址），决不是将字符串放到字符指针变量中。
2. 赋值方式。可以对字符指针变量赋值，但不能对数组名赋值。

    ```
    char *a; a=”I love China!”;  // 对
    char str[14];str[0]=’I’;  // 对
    char str[14]; str=”I love China!”; //错
    ```
3. 初始化的含义
    
    ```
    char *a=”I love China！”; 与
    char *a; a=”I love China！”;等价
    char str[14]= ”I love China！”;与
    char str[14];  str[]=”I love China！”;    不等价
    ```
4. 存储单元的内容
    1. 编译时为字符数组分配若干存储单元，以存放各元素的值，而对字符指针变量，只分配一个存储单元存储地址
        
        ```
        char *a; scanf(“%s”,a);  // 错
        char *a,str[10];      
        a=str;                  
        scanf (“%s”,a);      //对 
        ```
5. 指针变量的值是可以改变的，而数组名代表一个固定的值(数组首元素的地址)，不能改变。
    
    ```
    int main()
    { char *a="I love China!";//不能改为char a[]=“I love China!”;
    //只有变量才能加，如果为a[]，那么a就是常量了
    a=a+7;    
    printf(“%s\n”,a);   
    return 0;}
    ```
6. 字符数组中各元素的值是可以改变的，但字符指针变量指向的字符串常量中的内容是不可以被取代的。 
    
    ```
    char a[]=”House”,*b=” House”;
    a[2]=’r’;        对
    *(b+3) = 'x';    //错误，因为” House”在常量区是不能被修改的
    ```
7. 引用数组元数
    1. 对字符数组可以用下标法和地址法引用数组元素`（a[5],*(a+5)）`。如果字符指针变量p=a，则也可以用指针变量带下标的形式和地址法引用（p[5],*(p+5)）。
    2. `char *a=″I love China!″;`
    3. 则a[5]的值是第6个字符，即字母’e’
8. 用指针变量指向一个格式字符串，可以用它代替printf函数中的格式字符串。
    
    ```
    char *format;
    format=”a=%d,b=%f\n”; 
    printf(format,a,b);
    相当于printf(“a=%d,b=%f\n”,a,b);
    ```

