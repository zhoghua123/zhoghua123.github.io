---
layout: post
title:  第十八章-C语言进阶（一）
category: C语言
tags: C
keywords: C
--- 

## 指针强化
1. 指针也是一种变量，占有内存空间，用来保存内存地址
    1. 即指针也是一种变量，分配内存空间，内存空间的大小由编译器决定，比如:VS编译器下指针是4个字节
2. 同一种编译器下，所有的指针类型占用的内存空间都一样，跟指针的类型无关
    1. 即：`int *p;doub *p; char *p,char **p;`这4个p占用内存大小都是4个字节（vs编译器而言）
3. 那么指针的数据类型有什么用呢？ 
    1. 指针的数据类型是指这个指针指向的内存中存放的数据是什么类型。
    2. 指针步长（p++），根据所指内存存储的数据类型来确定，每次++，加几个字节
4. 指针变量和他指向的内存块
    1. 修改指针的值，只会改变指针的指向，并不会改变指针所指内存块中的数据；p = 0x1111；
    2. *p = a；修改指针指向内存中存储的值，并不会改变指针变量的值。
5. *p操作内存
    1. 在指针声明时，*号表示所声明的变量为指针
    2. 在指针使用时，*号表示 操作 指针所指向的内存空间中的值
    3. *p相当于通过地址(p变量的值)找到一块内存；然后操作内存
    4. *p放在等号的左边赋值（给内存赋值）
    5. *p放在等号的右边取值（从内存获取值）
6. 字符串一级指针内存模型
    
    ```
    char buf[20]= "aaaa"; //∂®“Â≤¢«“≥ı ºªØ
	  char buf2[] = "bbbb";
	  char *p1 = "111111";
	  char *p2 = malloc(100); 
	  strcpy(p2, "3333");
    ```
    
    1. 常量区中分配存放4个字符串：`“aaaa”、“bbbb”、“111111”、“3333”`
    2. 栈区：
        1. 先给buf分配20个字节的内存，内存中将常量“aaaa”拷贝进去
        2. 再给buf2分配5个字节的内存，内存中将常量“bbbb”拷贝进去
        3. 给指针p1分配4个字节，用于存储常量区“111111”的存储地址
        4. 给指针p2分配4个字节，用于存储堆区100个字节内存的首地址
    3. 堆区
        1. 通过malloc在堆区分配100个字节的内存
        2. 通过strcpy，将“3333”常量拷贝到堆区中。



